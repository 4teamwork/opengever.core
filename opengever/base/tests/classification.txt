Classification Behavior
=======================

The classification behavior provides several fields used for classifying
a container:
    classification
    privacy_layer
    public_trial
    public_trial_statement
    archival_value
    custody_period
    retention_period

When we create a dexterity content type::

    >>> from opengever.base.behaviors import classification
    >>> from plone.dexterity.fti import DexterityFTI
    >>> fti = DexterityFTI('ClassificationFTI')
    >>> fti.behaviors = ('opengever.base.behaviors.classification.IClassification',)
    >>> self.portal.portal_types._setObject('ClassificationFTI', fti)
    'ClassificationFTI'
    >>> schema = fti.lookupSchema()

If we access the site as an admin TTW::

    >>> from Products.Five.testbrowser import Browser
    >>> browser = Browser()
    >>> browser.handleErrors = False
    >>> self.app.acl_users.userFolderAddUser('root', 'secret', ['Manager'], [])
    >>> browser.addHeader('Authorization', 'Basic root:secret')

We can see this type in the addable types at the root of the site::

    >>> browser.open("http://nohost/plone/folder_factories")
    >>> 'ClassificationFTI' in browser.contents
    True
    >>> browser.getControl("ClassificationFTI").click()
    >>> browser.getControl("Add").click()
    >>> browser.getControl(name="form.widgets.title").value = "My Object"
    >>> browser.getControl(name="form.widgets.IClassification.classification:list").value = [classification.CLASSIFICATION_CONFIDENTIAL]
    >>> browser.getControl(name="form.widgets.IClassification.privacy_layer:list").value = [classification.PRIVACY_LAYER_YES]
    >>> browser.getControl(name="form.widgets.IClassification.public_trial:list").value = [classification.PUBLIC_TRIAL_PUBLIC]
    >>> browser.getControl(name="form.widgets.IClassification.public_trial_statement").value = 'My Statement'
    >>> browser.getControl(name="form.widgets.IClassification.archival_value:list").value = [classification.ARCHIVAL_VALUE_UNCHECKED]
    >>> browser.getControl(name="form.widgets.IClassification.custody_period").value = '11'
    >>> browser.getControl(name="form.widgets.IClassification.retention_period").value = '12'
    >>> browser.getControl(name="form.buttons.save").click()
    >>> browser.url
    'http://nohost/plone/ClassificationFTI/view'

Get the created object::

    >>> obj = self.portal.ClassificationFTI
    >>> obj!=None
    True

Check the values of the created object::

    >>> obj.classification == classification.CLASSIFICATION_CONFIDENTIAL
    True
    >>> obj.privacy_layer == classification.PRIVACY_LAYER_YES
    True
    >>> obj.public_trial == classification.PUBLIC_TRIAL_PUBLIC
    True
    >>> obj.public_trial_statement == 'My Statement'
    True
    >>> obj.archival_value == classification.ARCHIVAL_VALUE_UNCHECKED
    True
    >>> obj.custody_period
    11
    >>> obj.retention_period
    12

