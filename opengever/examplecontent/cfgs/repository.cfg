[transmogrifier]
pipeline =
    csvsource
    fix-dates
    insert-effectivetitle
    insert-title
    retention_period-cast
    custody_period-cast
    constructor
    dex_schemaupdater
    reindexobject
    savepoint

[csvsource]
blueprint=collective.transmogrifier.sections.csvsource
filename = opengever.examplecontent:data/test_repository_1.csv
src = ascii

[fix-dates]
blueprint = collective.transmogrifier.sections.inserter
key = string:valid_until
value = python: item['valid_until'] != '' and item['valid_until'] or None

[insert-effectivetitle]
blueprint = collective.transmogrifier.sections.inserter
key = string:effective_title
value = python: item['effective_title'].decode('utf-8')

[insert-title]
blueprint = collective.transmogrifier.sections.inserter
key = string:title
value = python: item['effective_title']

[retention_period-cast]
blueprint = collective.transmogrifier.sections.inserter
key= string:retention_period
value = python: item['retention_period'] and int(item['retention_period'])

[custody_period-cast]
blueprint = collective.transmogrifier.sections.inserter
key=string:custody_period
value = python: item['custody_period'] and int(item['custody_period'])

[constructor]
blueprint = collective.transmogrifier.sections.constructor

[dex_schemaupdater]
blueprint = transmogrify.dexterity.schemaupdater

[reindexobject]
blueprint = plone.app.transmogrifier.reindexobject

[savepoint]
blueprint = collective.transmogrifier.sections.savepoint
every = 50
