<aside class="sidebar"
       i18n:domain="opengever.bumblebee"
       tal:define="file_size view/overlay/get_file_size">
  <header>
    <span tal:attributes="class string:file-mimetype ${view/overlay/get_mime_type_css_class}" />
    <div>
      <a class="title"
         tal:attributes="href context/absolute_url"
         tal:content="view/overlay/get_title" />
      <span class="filesize" tal:condition="file_size" tal:content="string:${file_size} KB" />
    </div>
  </header>
  <main>
    <table class="metadata">
      <tr>
        <td class="title" i18n:translate="">Creator:</td>
        <td class="value" tal:content="structure view/overlay/get_creator_link"></td>
      </tr>
      <tr tal:define="date view/overlay/get_document_date" tal:condition="nocall: date">
        <td class="title" i18n:translate="">Document date:</td>
        <td class="value" tal:content="date"></td>
      </tr>
      <tr tal:define="dossier view/overlay/get_containing_dossier" tal:condition="nocall: dossier">
        <td class="title" i18n:translate="">Dossier:</td>
        <td class="value">
          <a tal:attributes="href dossier/absolute_url" tal:content="dossier/Title" />
        </td>
      </tr>
      <tr>
        <td class="title" i18n:translate="">Reference number:</td>
        <td class="value" tal:content="view/overlay/get_reference_number"></td>
      </tr>
    </table>
  </main>
  <footer>
    <div metal:use-macro="context/@@macros/file_action_buttons" />
    <div class="info-viewlets">
      <div tal:replace="structure view/overlay/render_checked_out_viewlet" />
      <div tal:replace="structure view/overlay/render_lock_info_viewlet" />
      <div tal:condition="view/is_versioned">
        <dl class="portalMessage warning">
          <dt i18n:domain="plone" i18n:translate="">Warning</dt>
          <dd i18n:translate="warning_on_versioned_context">
            You are looking at a versioned file.
          </dd>
        </dl>
      </div>
    </div>
  </footer>
</aside>
<article id="file-preview"
         tal:define="pdf_url view/overlay/get_preview_pdf_url;
                     has_file view/overlay/has_file;
		     checksum view/overlay/get_bumblebee_checksum">
  <iframe tal:condition="has_file" tal:attributes="data-bumblebee-checksum checksum;
						   data-bumblebee-src pdf_url;
						   src pdf_url" />
  <img class="bumblebee-thumbnail"
       tal:condition="not:has_file"
       tal:attributes="data-bumblebee-checksum checksum;
		       data-bumblebee-src pdf_url;
		       src pdf_url" />
</article>
