ftw.testing PATCHING: Products.CMFQuickInstallerTool.events.handleProfileImportedEvent with noop
ftw.testing PATCHING: Products.CMFQuickInstallerTool.events.handleBeforeProfileImportEvent with noop
Running ftw.testing.layer.AnnotationLayer tests:
  Set up ftw.testing.layer.ftw.testing:LAYER_CLEANUP in 0.000 seconds.
  Set up ftw.testing.layer.ftw.testing:ZCML_DIRECTIVES in 0.003 seconds.
  Set up ftw.testing.layer.AnnotationLayer in 0.003 seconds.
  Ran 35 tests with 0 failures, 0 errors and 0 skipped in 0.643 seconds.
Running ftw.testing.layer.LatexZCMLLayer tests:
  Tear down ftw.testing.layer.AnnotationLayer in 0.000 seconds.
  Tear down ftw.testing.layer.ftw.testing:ZCML_DIRECTIVES in 0.000 seconds.
  Tear down ftw.testing.layer.ftw.testing:LAYER_CLEANUP in 0.000 seconds.
  Set up plone.testing.zca.LayerCleanup in 0.000 seconds.
  Set up plone.testing.zca.ZCMLDirectives in 0.002 seconds.
  Set up ftw.testing.layer.LatexZCMLLayer in 0.082 seconds.
  Ran 25 tests with 0 failures, 0 errors and 0 skipped in 1.839 seconds.
Running opengever.core.testing.opengever.core:postgres:functional tests:
  Tear down ftw.testing.layer.LatexZCMLLayer in 0.000 seconds.
  Tear down plone.testing.zca.ZCMLDirectives in 0.000 seconds.
  Set up plone.testing.z2.Startup in 0.189 seconds.
  Set up plone.app.testing.layers.PloneFixture in 5.469 seconds.
  Set up ftw.builder.testing.BuilderLayer in 0.000 seconds.
  Set up opengever.core.postgresql_testing.PostgreSQLFixture in 0.000 seconds.
  Set up opengever.core.testing.OpengeverFixture:PostgreSQLFixture [?1034hin 10.465 seconds.
  Set up ftw.builder.testing.set_builder_session_factory in 0.000 seconds.
  Set up opengever.core.testing.opengever.core:postgres:functional in 0.000 seconds.


Error in test test_raises_notfound_when_notification_id_is_missing (opengever.activity.tests.test_resolve.TestResolveNotificationView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_resolve.py", line 27, in test_raises_notfound_when_notification_id_is_missing
    browser.login().open(self.portal, view='resolve_notification')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/python/cache/eggs/grokcore.view-2.8-py2.7.egg/grokcore/view/components.py", line 151, in __call__
    return mapply(self.render, (), self.request)
  File "/Users/jone/projects/python/cache/eggs/zope.publisher-3.12.6-py2.7.egg/zope/publisher/publish.py", line 107, in mapply
    return debug_call(obj, args)
   - __traceback_info__: <bound method ResolveNotificationView.render of <opengever.activity.browser.resolve.ResolveNotificationView object at 0x11694b450>>
  File "/Users/jone/projects/python/cache/eggs/zope.publisher-3.12.6-py2.7.egg/zope/publisher/publish.py", line 113, in debug_call
    return obj(*args)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/browser/resolve.py", line 19, in render
    self.notification = center.get_notification(notification_id)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/center.py", line 150, in get_notification
    return Notification.get(notification_id)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/declarative.py", line 56, in get
    return cls.query.get(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 818, in get
    return self._get_impl(ident, loading.load_on_ident)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 851, in _get_impl
    return fallback_fn(self, key)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 217, in load_on_ident
    return q.one()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2472, in one
    ret = list(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2515, in __iter__
    return self._execute_and_instances(context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2530, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
DataError: (psycopg2.DataError) invalid input syntax for integer: ""
LINE 3: WHERE notifications.id = ''
                                 ^
 [SQL: 'SELECT notifications.id AS notifications_id, notifications.userid AS notifications_userid, notifications.activity_id AS notifications_activity_id, notifications.is_read AS notifications_is_read \nFROM notifications \nWHERE notifications.id = %(param_1)s'] [parameters: {'param_1': ''}]


ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-jBEmeO.html

Failure in test test_next_page_url (opengever.activity.tests.test_views.TestListNotifications)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_views.py", line 201, in test_next_page_url
    [item['id'] for item in browser.json.get('notifications')])
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [8, 9, 10, 11, 12, 13, 14] != [9, 10, 11, 12, 13, 14, 15]

First differing element 0:
8
9

- [8, 9, 10, 11, 12, 13, 14]
?  ---

+ [9, 10, 11, 12, 13, 14, 15]
?                       ++++


 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-yOP3F1.html

Failure in test test_notifications_are_linked_to_resolve_notification_view (opengever.activity.tests.test_views.TestListNotifications)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_views.py", line 255, in test_notifications_are_linked_to_resolve_notification_view
    browser.json.get('notifications')[0].get('link'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://example.com/@@resolve_notification?notification_id=1' != u'http://example.com/@@resolve_notification?notification_id=2'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-kRpOLm.html

Failure in test test_page_can_be_set_by_request_parameter (opengever.activity.tests.test_views.TestListNotifications)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_views.py", line 170, in test_page_can_be_set_by_request_parameter
    [item['id'] for item in browser.json.get('notifications')])
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [1, 2, 3, 4, 5, 6, 7] != [3, 4, 5, 6, 7, 8, 2]

First differing element 0:
1
3

- [1, 2, 3, 4, 5, 6, 7]
+ [3, 4, 5, 6, 7, 8, 2]

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-c6eETn.html

Failure in test test_returns_a_json_representation_of_the_notifications (opengever.activity.tests.test_views.TestListNotifications)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_views.py", line 132, in test_returns_a_json_representation_of_the_notifications
    u'id': 2}], browser.json.get('notifications'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [{u'created': u'2014-05-07T12:... != [{u'title': u'Kennzahlen 2014 ...

First differing element 0:
{u'created': u'2014-05-07T12:30:00+00:00', u'read': False, u'title': u'Kennzahlen 2014 erfassen', u'label': u'Task added', u'link': u'http://example.com/@@resolve_notification?notification_id=1', u'summary': u'Task bla added by Hugo', u'id': 1}
{u'title': u'Kennzahlen 2014 erfassen', u'read': False, u'created': u'2014-05-07T12:30:00+00:00', u'summary': u'Task bla added by Hugo', u'link': u'http://example.com/@@resolve_notification?notification_id=2', u'label': u'Task added', u'id': 2}

Diff is 1087 characters long. Set self.maxDiff to None to see it.

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-ev80dY.html

Failure in test test_meeting_is_linked_with_title (opengever.base.tests.test_pathbar.TestPathBar)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/tests/test_pathbar.py", line 64, in test_meeting_is_linked_with_title
    last_link.node.attrib['href'])
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-1' != 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-2'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-VyF7yf.html

Failure in test test_contains_contact_id_as_sequence_number (opengever.contact.tests.test_byline.TestContactByline)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_byline.py", line 23, in test_contains_contact_id_as_sequence_number
    browser.css('#plone-document-byline .sequenceNumber').text)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: ['Sequence Number: 1'] != ['Sequence Number: 2']

First differing element 0:
Sequence Number: 1
Sequence Number: 2

- ['Sequence Number: 1']
?                    ^

+ ['Sequence Number: 2']
?                    ^




Error in test test_org_role_address_doc_propety_provider (opengever.contact.tests.test_docprops.TestContactDocPropertyProvider)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_docprops.py", line 147, in test_org_role_address_doc_propety_provider
    org_role_address = org_role.addresses[0]
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/models/org_role.py", line 107, in addresses
    for address in self.organization.addresses]
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Organization at 0x11f31e110> is not bound to a Session; lazy load operation of attribute 'addresses' cannot proceed



Error in test test_add_mailaddress (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 32, in test_add_mailaddress
    view='contact-1/mails/add')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_add_mailaddress_without_a_valid_address (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 79, in test_add_mailaddress_without_a_valid_address
    view='contact-1/mails/add')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_add_mailaddress_without_address (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 65, in test_add_mailaddress_without_address
    view='contact-1/mails/add')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_add_mailaddress_without_address_and_label (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 92, in test_add_mailaddress_without_address_and_label
    view='contact-1/mails/add')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_add_mailaddress_without_label (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 51, in test_add_mailaddress_without_label
    view='contact-1/mails/add')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_call_api_function_if_available (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 205, in test_call_api_function_if_available
    browser.login().visit(self.contactfolder, view='contact-1/mails/list')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_delete_given_mailaddress (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 133, in test_delete_given_mailaddress
    browser.login().visit(self.contactfolder, view='contact-1/mails/1/delete')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_list_multiple_mailaddresses (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 115, in test_list_multiple_mailaddresses
    browser.login().visit(self.contactfolder, view='contact-1/mails/list')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_list_no_mailaddresses (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 121, in test_list_no_mailaddresses
    browser.login().visit(self.contactfolder, view='contact-1/mails/list')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_returns_view_if_mailaddress_found_on_given_context (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 247, in test_returns_view_if_mailaddress_found_on_given_context
    view='contact-1/mails/{}'.format(email.mailaddress_id))
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_update_given_mailaddress_address (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 196, in test_update_given_mailaddress_address
    view='contact-1/mails/1/update')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_update_given_mailaddress_label (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 178, in test_update_given_mailaddress_label
    view='contact-1/mails/1/update')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_update_given_mailaddress_label_and_address (opengever.contact.tests.test_mail_addresses_view.TestMailAddressesView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_mail_addresses_view.py", line 155, in test_update_given_mailaddress_label_and_address
    view='contact-1/mails/1/update')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/opengever-contact-contactfolder/contact-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_add_objects_properly_while_syncing (opengever.contact.tests.test_object_syncer.TestOrganizationSyncer)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_object_syncer.py", line 144, in test_add_objects_properly_while_syncing
    OrganizationSyncer(self.source_db, 'SELECT * from organizations')()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/syncer/object_syncer.py", line 98, in __call__
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 761, in _emit_insert_statements
    execute(statement, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
ProgrammingError: (psycopg2.ProgrammingError) column "is_active" is of type boolean but expression is of type integer
LINE 1: ...LUES (nextval('contacts_id_seq'), 'organization', 1, NULL, 2...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: "INSERT INTO contacts (id, contact_type, is_active, description, former_contact_id) VALUES (nextval('contacts_id_seq'), %(contact_type)s, %(is_active)s, %(description)s, %(former_contact_id)s) RETURNING contacts.id"] [parameters: {'former_contact_id': 2344, 'is_active': 1, 'description': None, 'contact_type': 'organization'}]



Error in test test_update_existing_objects_properly_while_syncing (opengever.contact.tests.test_object_syncer.TestOrganizationSyncer)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_object_syncer.py", line 157, in test_update_existing_objects_properly_while_syncing
    OrganizationSyncer(self.source_db, 'SELECT * from organizations')()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/syncer/object_syncer.py", line 98, in __call__
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 761, in _emit_insert_statements
    execute(statement, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
ProgrammingError: (psycopg2.ProgrammingError) column "is_active" is of type boolean but expression is of type integer
LINE 1: ...LUES (nextval('contacts_id_seq'), 'organization', 1, NULL, 2...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: "INSERT INTO contacts (id, contact_type, is_active, description, former_contact_id) VALUES (nextval('contacts_id_seq'), %(contact_type)s, %(is_active)s, %(description)s, %(former_contact_id)s) RETURNING contacts.id"] [parameters: {'former_contact_id': 2344, 'is_active': 1, 'description': None, 'contact_type': 'organization'}]



Error in test test_add_objects_properly_while_syncing (opengever.contact.tests.test_object_syncer.TestPersonSyncer)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_object_syncer.py", line 91, in test_add_objects_properly_while_syncing
    syncer()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/syncer/object_syncer.py", line 98, in __call__
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 761, in _emit_insert_statements
    execute(statement, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
ProgrammingError: (psycopg2.ProgrammingError) column "is_active" is of type boolean but expression is of type integer
LINE 1: ...id) VALUES (nextval('contacts_id_seq'), 'person', 1, NULL, 1...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: "INSERT INTO contacts (id, contact_type, is_active, description, former_contact_id) VALUES (nextval('contacts_id_seq'), %(contact_type)s, %(is_active)s, %(description)s, %(former_contact_id)s) RETURNING contacts.id"] [parameters: {'former_contact_id': 1, 'is_active': 1, 'description': None, 'contact_type': 'person'}]



Error in test test_update_object_properly_while_syncing (opengever.contact.tests.test_object_syncer.TestPersonSyncer)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_object_syncer.py", line 109, in test_update_object_properly_while_syncing
    syncer()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/syncer/object_syncer.py", line 98, in __call__
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 761, in _emit_insert_statements
    execute(statement, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
ProgrammingError: (psycopg2.ProgrammingError) column "is_active" is of type boolean but expression is of type integer
LINE 1: ...id) VALUES (nextval('contacts_id_seq'), 'person', 1, NULL, 1...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: "INSERT INTO contacts (id, contact_type, is_active, description, former_contact_id) VALUES (nextval('contacts_id_seq'), %(contact_type)s, %(is_active)s, %(description)s, %(former_contact_id)s) RETURNING contacts.id"] [parameters: {'contact_type': 'person', 'is_active': 1, 'description': None, 'former_contact_id': 1}]



Failure in test test_updates_existing_phonenumbers_properly_by_label (opengever.contact.tests.test_object_syncer.TestPhoneNumberSyncer)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_object_syncer.py", line 355, in test_updates_existing_phonenumbers_properly_by_label
    [phone.label for phone in organization.phonenumbers])
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [u'Privat', u'Gesch\xe4ftlich'... != [u'Gesch\xe4ftlich', u'Privat'...

First differing element 0:
Privat
Gesch\xe4ftlich

- [u'Privat', u'Gesch\xe4ftlich']
+ [u'Gesch\xe4ftlich', u'Privat']



Failure in test test_get_url_returns_url_for_wrapper_object (opengever.contact.tests.test_organization.TestOrganization)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_organization.py", line 16, in test_get_url_returns_url_for_wrapper_object
    org1.get_url())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-contact-contactfolder/contact-1/view' != 'http://nohost/plone/opengever-contact-contactfolder/contact-2/view'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-hL6XUl.html

Failure in test test_name_is_linked_to_organization_view (opengever.contact.tests.test_organization_listing.TestOrganizationListing)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_organization_listing.py", line 67, in test_name_is_linked_to_organization_view
    browser.find(u'Meier AG').get('href'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-contact-contactfolder/contact-1/view' != 'http://nohost/plone/opengever-contact-contactfolder/contact-2/view'



Error in test test_cross_injection_raises_unauthorized (opengever.contact.tests.test_participation.TestParticipationWrapper)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_participation.py", line 123, in test_cross_injection_raises_unauthorized
    dossier2.absolute_url()))
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/dossier-2/participation-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>



Error in test test_dossier_participation_endpoint (opengever.contact.tests.test_participation.TestParticipationWrapper)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_participation.py", line 109, in test_dossier_participation_endpoint
    self.dossier.absolute_url()))
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 519, in traverse
    return response.notFoundError(URL)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 718, in notFoundError
    "<p><b>Resource:</b> %s</p>" % escape(entry))
NotFound:   <h2>Site Error</h2>
  <p>An error was encountered while publishing this resource.
  </p>
  <p><strong>Resource not found</strong></p>

  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://nohost/plone/dossier-1/participation-1</p>
  <hr noshade="noshade"/>

  <p>Troubleshooting Suggestions</p>

  <ul>
  <li>The URL may be incorrect.</li>
  <li>The parameters passed to this resource may be incorrect.</li>
  <li>A resource that this resource relies on may be
      encountering an error.</li>
  </ul>

  <p>For more detailed information about the error, please
  refer to the error log.
  </p>

  <p>If the error persists please contact the site maintainer.
  Thank you for your patience.
  </p>

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-a6uQ64.html

Failure in test test_edit_action_is_available (opengever.contact.tests.test_participation_tab.ParticipationTab)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_participation_tab.py", line 104, in test_edit_action_is_available
    edit_link.get('href'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/dossier-1/participation-2/edit' != 'http://nohost/plone/dossier-1/participation-3/edit'



Failure in test test_get_by_former_contact_id_returns_contact (opengever.contact.tests.test_person.TestPerson)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_person.py", line 83, in test_get_by_former_contact_id_returns_contact
    self.assertEqual(peter, Person.query.get_by_former_contact_id(13))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: <opengever.contact.models.person.Person object at 0x122352710> != <opengever.contact.models.person.Person object at 0x122349c50>



Failure in test test_get_url_returns_url_for_wrapper_object (opengever.contact.tests.test_person.TestPerson)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_person.py", line 21, in test_get_url_returns_url_for_wrapper_object
    peter.get_url())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-contact-contactfolder/contact-1/view' != 'http://nohost/plone/opengever-contact-contactfolder/contact-2/view'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-_MUd_E.html

Failure in test test_first_and_lastname_are_linked_to_person_view (opengever.contact.tests.test_person_listing.TestPersonListing)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_person_listing.py", line 79, in test_first_and_lastname_are_linked_to_person_view
    browser.find('Peter').get('href'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-contact-contactfolder/contact-1/view' != 'http://nohost/plone/opengever-contact-contactfolder/contact-2/view'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-Ni7g_a.html

Failure in test test_organizations_are_linked_and_sepearated_by_comma (opengever.contact.tests.test_person_listing.TestPersonListing)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_person_listing.py", line 115, in test_organizations_are_linked_and_sepearated_by_comma
    row.css('td').text)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: ['Frau', '', 'Sandra', 'Albert... != ['Frau', '', 'Sandra', 'Albert...

First differing element 5:
Meier AG, Sophie SA
Sophie SA, Meier AG

- ['Frau', '', 'Sandra', 'Albert', 'No', u'Meier AG, Sophie SA', '']
?                                        - ----------

+ ['Frau', '', 'Sandra', 'Albert', 'No', 'Sophie SA, Meier AG', '']
?                                                  ++++++++++




Failure in test test_contains_only_active_organizations_and_persons_and_org_roles (opengever.contact.tests.test_vocabularies.TestContactsVocabulary)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_vocabularies.py", line 58, in test_contains_only_active_organizations_and_persons_and_org_roles
    vocabulary.search('*'))
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/test_case.py", line 137, in assertTerms
    self.assertEquals(expected_terms, effective_terms)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [(<opengever.contact.models.pe... != [(<opengever.contact.models.pe...

First differing element 0:
(<opengever.contact.models.person.Person object at 0x123192850>, u'M\xfcller Peter [1111]')
(<opengever.contact.models.person.Person object at 0x122b0cad0>, u'M\xfcller Peter [1111]')

Diff is 2217 characters long. Set self.maxDiff to None to see it.



Failure in test test_supports_fuzzy_search (opengever.contact.tests.test_vocabularies.TestContactsVocabulary)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/tests/test_vocabularies.py", line 67, in test_supports_fuzzy_search
    vocabulary.search('Meier'))
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/test_case.py", line 137, in assertTerms
    self.assertEquals(expected_terms, effective_terms)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [(<opengever.contact.models.or... != [(<opengever.contact.models.or...

First differing element 0:
(<opengever.contact.models.organization.Organization object at 0x1234cc210>, 'Meier AG [2222]')
(<opengever.contact.models.organization.Organization object at 0x123056710>, u'Meier AG [2222]')

- [(<opengever.contact.models.organization.Organization object at 0x1234cc210>,
?                                                                      ^^^^

+ [(<opengever.contact.models.organization.Organization object at 0x123056710>,
?                                                                      ^^^^

-   'Meier AG [2222]')]
+   u'Meier AG [2222]')]
?   +


error parsing dom, failure to add csrf token to response for url http://nohost/plone/ordnungssystem/opengever-repository-repositoryfolder/dossier-1/document-1/file_upload
error parsing dom, failure to add csrf token to response for url http://nohost/plone/ordnungssystem/opengever-repository-repositoryfolder/dossier-1/document-1/file_upload


Error in test test_org_role_recipient_properties_are_added (opengever.dossier.tests.test_templatefolder.TestDocumentWithTemplateForm)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/dossier/tests/test_templatefolder.py", line 324, in test_org_role_recipient_properties_are_added
    address_id = org_role.addresses[0].address_id
  File "/Users/jone/projects/2packages/opengever.core/opengever/contact/models/org_role.py", line 107, in addresses
    for address in self.organization.addresses]
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Organization at 0x125bee250> is not bound to a Session; lazy load operation of attribute 'addresses' cannot proceed



Failure in test test_subtasks_by_task_returns_all_subtask_excluding_the_given_one (opengever.globalindex.tests.test_query.TestFunctionalTaskQueries)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_query.py", line 243, in test_subtasks_by_task_returns_all_subtask_excluding_the_given_one
    Task.query.subtasks_by_task(task1.get_sql_object()).all())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [<Task 221124849@client1>, <Ta... != [<Task 221124850@client1>, <Ta...

First differing element 0:
<Task 221124849@client1>
<Task 221124850@client1>

- [<Task 221124849@client1>, <Task 221124850@client1>]
+ [<Task 221124850@client1>, <Task 221124849@client1>]



Error in test test_task_report (opengever.globalindex.tests.test_reporter.TestTaskReporter)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_reporter.py", line 24, in test_task_report
    data={'task_ids': [self.task.id]})
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/python/cache/eggs/grokcore.view-2.8-py2.7.egg/grokcore/view/components.py", line 151, in __call__
    return mapply(self.render, (), self.request)
  File "/Users/jone/projects/python/cache/eggs/zope.publisher-3.12.6-py2.7.egg/zope/publisher/publish.py", line 107, in mapply
    return debug_call(obj, args)
   - __traceback_info__: <bound method TaskReporter.render of <opengever.globalindex.browser.report.TaskReporter object at 0x1236d8b10>>
  File "/Users/jone/projects/python/cache/eggs/zope.publisher-3.12.6-py2.7.egg/zope/publisher/publish.py", line 113, in debug_call
    return obj(*args)
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/browser/report.py", line 46, in render
    tasks = [tt for tt in tasks]
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/utils.py", line 17, in get_selected_items
    tasks = Task.query.by_ids(ids)
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/model/query.py", line 62, in by_ids
    return self.filter(Task.task_id.in_(task_ids)).all()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2398, in all
    return list(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2515, in __iter__
    return self._execute_and_instances(context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2530, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
DataError: (psycopg2.DataError) invalid input syntax for integer: "t"
LINE 3: WHERE tasks.id IN ('t', 'a', 's', 'k', '-', '1')
                           ^
 [SQL: 'SELECT tasks.id AS tasks_id, tasks.admin_unit_id AS tasks_admin_unit_id, tasks.int_id AS tasks_int_id, tasks.title AS tasks_title, tasks.text AS tasks_text, tasks.breadcrumb_title AS tasks_breadcrumb_title, tasks.physical_path AS tasks_physical_path, tasks.review_state AS tasks_review_state, tasks.icon AS tasks_icon, tasks.responsible AS tasks_responsible, tasks.issuer AS tasks_issuer, tasks.task_type AS tasks_task_type, tasks.is_subtask AS tasks_is_subtask, tasks.reference_number AS tasks_reference_number, tasks.sequence_number AS tasks_sequence_number, tasks.dossier_sequence_number AS tasks_dossier_sequence_number, tasks.containing_dossier AS tasks_containing_dossier, tasks.containing_subdossier AS tasks_containing_subdossier, tasks.created AS tasks_created, tasks.modified AS tasks_modified, tasks.deadline AS tasks_deadline, tasks.completed AS tasks_completed, tasks.issuing_org_unit AS tasks_issuing_org_unit, tasks.assigned_org_unit AS tasks_assigned_org_unit, tasks.predecessor_id AS tasks_predecessor_id \nFROM tasks \nWHERE tasks.id IN (%(id_1)s, %(id_2)s, %(id_3)s, %(id_4)s, %(id_5)s, %(id_6)s)'] [parameters: {'id_2': 'a', 'id_3': 's', 'id_1': 't', 'id_6': '1', 'id_4': 'k', 'id_5': '-'}]



Error in test test_forwarding_class (opengever.globalindex.tests.test_task_css_class.TestTaskCssClass)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_css_class.py", line 13, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_normal_task_classk (opengever.globalindex.tests.test_task_css_class.TestTaskCssClass)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_css_class.py", line 13, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_remote_forwardings_has_forwarding_class (opengever.globalindex.tests.test_task_css_class.TestTaskCssClass)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_css_class.py", line 13, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_remote_subtask_is_marked_as_remote_task_when_admin_unit_is_a_remote_one (opengever.globalindex.tests.test_task_css_class.TestTaskCssClass)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_css_class.py", line 13, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_remote_subtask_is_marked_as_subtask_when_admin_unit_is_the_current_one (opengever.globalindex.tests.test_task_css_class.TestTaskCssClass)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_css_class.py", line 13, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_remote_task_class (opengever.globalindex.tests.test_task_css_class.TestTaskCssClass)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_css_class.py", line 13, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_subtask_class (opengever.globalindex.tests.test_task_css_class.TestTaskCssClass)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_css_class.py", line 13, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_fallback_when_admin_unit_not_exists (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_handles_non_ascii_characters_correctly (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_is_prefixed_with_state_icon_per_default (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_link_contains_contenttype_class (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_link_is_suffixed_with_responsible_info_by_default (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_link_is_xss_safe (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_link_text_is_task_title (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_link_title_is_breadcrumb (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_responsible_info_is_parametrable (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_state_prefixe_is_parametrable (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_target_blank_for_remote_tasks (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_task_is_linked_when_user_has_access (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Error in test test_task_is_not_linked_when_user_has_no_access (opengever.globalindex.tests.test_task_link.TestTaskLinkGeneration)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/globalindex/tests/test_task_link.py", line 17, in setUp
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]


ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-I2mwDI.html

Failure in test test_selected_contacts_are_listed_and_linked_in_the_references_column (opengever.journal.tests.test_manual_entry.TestManualJournalEntry)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/journal/tests/test_manual_entry.py", line 94, in test_selected_contacts_are_listed_and_linked_in_the_references_column
    [link.get('href') for link in links])
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: ['http://nohost/plone/opengeve... != ['http://nohost/plone/opengeve...

First differing element 0:
http://nohost/plone/opengever-contact-contactfolder/contact-1
http://nohost/plone/opengever-contact-contactfolder/contact-2

- ['http://nohost/plone/opengever-contact-contactfolder/contact-1',
?                                                               ^

+ ['http://nohost/plone/opengever-contact-contactfolder/contact-2',
?                                                               ^

-  'http://nohost/plone/opengever-contact-contactfolder/contact-2']
?                                                               ^

+  'http://nohost/plone/opengever-contact-contactfolder/contact-3']
?                                                               ^




Error in test test_drop_reference_and_sequence_number_from_default_task_listings (opengever.latex.tests.test_listing.TestTaskListings)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/latex/tests/test_listing.py", line 240, in setUp
    .having(admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': 'client2', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_labels_are_translated_and_show_as_table_headers (opengever.latex.tests.test_listing.TestTaskListings)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/latex/tests/test_listing.py", line 240, in setUp
    .having(admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': 'client2', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_task_listing (opengever.latex.tests.test_listing.TestTaskListings)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/latex/tests/test_listing.py", line 240, in setUp
    .having(admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': 'client2', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_shows_only_task_on_admin_unit (opengever.latex.tests.test_opentaskreport.TestOpenTaskReport)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/latex/tests/test_opentaskreport.py", line 145, in test_shows_only_task_on_admin_unit
    .having(admin_unit=additional_admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]



Failure in test test_lock_info_returns_an_list_of_dicts_of_all_valid_locks (opengever.locking.tests.test_lockable.TestSQLLockable)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/locking/tests/test_lockable.py", line 137, in test_lock_info_returns_an_list_of_dicts_of_all_valid_locks
    ILockable(self.wrapper).lock_info())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [{'token': 'Meeting:1', 'time'... != [{'token': 'Meeting:2', 'time'...

First differing element 0:
{'token': 'Meeting:1', 'time': datetime.datetime(2017, 3, 17, 9, 35, 38, 516670, tzinfo=<UTC>), 'type': <plone.locking.interfaces.LockType object at 0x108e52090>, 'creator': 'test_user_1_'}
{'token': 'Meeting:2', 'time': datetime.datetime(2017, 3, 17, 10, 35, 38, 516670, tzinfo=psycopg2.tz.FixedOffsetTimezone(offset=60, name=None)), 'type': <plone.locking.interfaces.LockType object at 0x108e52090>, 'creator': u'test_user_1_'}

- [{'creator': 'test_user_1_',
+ [{'creator': u'test_user_1_',
?              +

-   'time': datetime.datetime(2017, 3, 17, 9, 35, 38, 516670, tzinfo=<UTC>),
+   'time': datetime.datetime(2017, 3, 17, 10, 35, 38, 516670, tzinfo=psycopg2.tz.FixedOffsetTimezone(offset=60, name=None)),
-   'token': 'Meeting:1',
?                     ^

+   'token': 'Meeting:2',
?                     ^

    'type': <plone.locking.interfaces.LockType object at 0x108e52090>}]



Failure in test test_lock_token_contains_object_type_and_is_separated_with_a_colon (opengever.locking.tests.test_lockable.TestSQLLockable)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/locking/tests/test_lockable.py", line 41, in test_lock_token_contains_object_type_and_is_separated_with_a_colon
    self.assertEqual(u'Meeting:1', lock.token)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: u'Meeting:1' != 'Meeting:2'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-zPzC9_.html

Failure in test test_when_unscheduled_proposals_exist (opengever.meeting.tests.test_committee.TestCommitteeWorkflow)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_committee.py", line 223, in test_when_unscheduled_proposals_exist
    error_messages())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: ['There are unscheduled propos... != []

First list contains 1 additional elements.
First extra element 0:
There are unscheduled proposals submitted to this committee.

- ['There are unscheduled proposals submitted to this committee.']
+ []

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-J78Ql9.html

Failure in test test_unscheduled_proposal_number (opengever.meeting.tests.test_committee_container.TestCommitteesTab)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_committee_container.py", line 242, in test_unscheduled_proposal_number
    browser.css('#committees_view .unscheduled_proposals').first.text)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'New unschedulded proposals: 5' != 'New unschedulded proposals: 4'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-_bfHLC.html

Failure in test test_unscheduled_proposal_number_link (opengever.meeting.tests.test_committee_container.TestCommitteesTab)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_committee_container.py", line 257, in test_unscheduled_proposal_number_link
    self.assertEquals('1', link.text)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: '1' != '0'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-PGtQLB.html

Failure in test test_member_is_linked_correctly (opengever.meeting.tests.test_committee_overview.TestCommitteeOverview)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_committee_overview.py", line 61, in test_member_is_linked_correctly
    browser.css('#current_membersBox li a').first.get('href'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/committee-1/member-1' != 'http://nohost/plone/committee-1/member-2'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-QBl3Rx.html

Error in test test_proposals_are_linked_correctly (opengever.meeting.tests.test_committee_overview.TestCommitteeOverview)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_committee_overview.py", line 157, in test_proposals_are_linked_correctly
    browser.css('#unscheduled_proposalsBox li a').first.get('href'))
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/nodes.py", line 163, in first
    raise NoElementFound(query_info=self.query_info)
NoElementFound: Empty result set: browser.css("#unscheduled_proposalsBox li a") did not match any nodes.



Error in test test_member_vocabulary_sorts_by_fullname (opengever.meeting.tests.test_member_vocabulary.TestMemberVocabulary)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_member_vocabulary.py", line 20, in test_member_vocabulary_sorts_by_fullname
    self.assertEqual([member2.fullname, member1.fullname],
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 573, in get
    value = state._load_expired(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 480, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 608, in load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <Member at 0x12c977850> is not bound to a Session; attribute refresh operation cannot proceed

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-gpiUjO.html

Failure in test test_listing (opengever.meeting.tests.test_proposal_listings.TestDossierProposalListing)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposal_listings.py", line 43, in test_listing
    table.dicts())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [{'State': 'Pending', 'Meeting... != [{'Reference Number': '2', 'Me...

First differing element 0:
{'State': 'Pending', 'Meeting': '', 'Reference Number': '1', 'Comittee': 'My committee', 'Title': 'My Proposal'}
{'Reference Number': '2', 'Meeting': '', 'State': 'Pending', 'Comittee': 'My committee', 'Title': 'My Proposal'}

  [{'Comittee': 'My committee',
    'Meeting': '',
-   'Reference Number': '1',
?                        ^

+   'Reference Number': '2',
?                        ^

    'State': 'Pending',
    'Title': 'My Proposal'}]

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-WVf4OF.html

Failure in test test_proposals_are_linked_to_meeting_if_scheduled (opengever.meeting.tests.test_proposal_listings.TestDossierProposalListing)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposal_listings.py", line 79, in test_proposals_are_linked_to_meeting_if_scheduled
    table.dicts())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [{'State': 'Scheduled', 'Meeti... != [{'Reference Number': '2', 'Me...

First differing element 0:
{'State': 'Scheduled', 'Meeting': u'C\xf6mmunity meeting', 'Reference Number': '1', 'Comittee': 'My committee', 'Title': 'My Proposal'}
{'Reference Number': '2', 'Meeting': u'C\xf6mmunity meeting', 'State': 'Scheduled', 'Comittee': 'My committee', 'Title': 'My Proposal'}

  [{'Comittee': 'My committee',
    'Meeting': u'C\xf6mmunity meeting',
-   'Reference Number': '1',
?                        ^

+   'Reference Number': '2',
?                        ^

    'State': 'Scheduled',
    'Title': 'My Proposal'}]

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-x8OuxF.html

Error in test test_listing (opengever.meeting.tests.test_proposal_listings.TestSubmittedProposals)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposal_listings.py", line 150, in test_listing
    table = browser.css('table.listing').first
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/nodes.py", line 163, in first
    raise NoElementFound(query_info=self.query_info)
NoElementFound: Empty result set: browser.css("table.listing") did not match any nodes.

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-N9oDYO.html

Error in test test_proposals_are_linked_correctly_to_the_submitted_proposal (opengever.meeting.tests.test_proposal_listings.TestSubmittedProposals)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposal_listings.py", line 166, in test_proposals_are_linked_correctly_to_the_submitted_proposal
    table = browser.css('table.listing').first
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/nodes.py", line 163, in first
    raise NoElementFound(query_info=self.query_info)
NoElementFound: Empty result set: browser.css("table.listing") did not match any nodes.

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-GiBnnE.html

Failure in test test_submitted_proposals_are_linked_to_meeting_if_scheduled (opengever.meeting.tests.test_proposal_listings.TestSubmittedProposals)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposal_listings.py", line 195, in test_submitted_proposals_are_linked_to_meeting_if_scheduled
    table.dicts())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [{'State': 'Scheduled', 'Meeti... != [{'Reference Number': '2', 'Me...

First differing element 0:
{'State': 'Scheduled', 'Meeting': u'C\xf6mmunity meeting', 'Reference Number': '1', 'Comittee': 'My committee', 'Title': 'My Proposal'}
{'Reference Number': '2', 'Meeting': u'C\xf6mmunity meeting', 'State': 'Scheduled', 'Comittee': 'My committee', 'Title': 'My Proposal'}

  [{'Comittee': 'My committee',
    'Meeting': u'C\xf6mmunity meeting',
-   'Reference Number': '1',
?                        ^

+   'Reference Number': '2',
?                        ^

    'State': 'Scheduled',
    'Title': 'My Proposal'}]



Error in test test_result_is_html_escaped (opengever.meeting.tests.test_protocol.TestFormatParticipant)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 511, in test_result_is_html_escaped
    member.get_title())
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/member.py", line 68, in get_title
    fullname = escape_html(self.fullname)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 573, in get
    value = state._load_expired(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 480, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 608, in load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <Member at 0x11379a050> is not bound to a Session; attribute refresh operation cannot proceed



Error in test test_return_fullname_if_no_email (opengever.meeting.tests.test_protocol.TestFormatParticipant)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 482, in test_return_fullname_if_no_email
    self.assertEqual(u'Hans M\xfcller', member.get_title())
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/member.py", line 68, in get_title
    fullname = escape_html(self.fullname)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 573, in get
    value = state._load_expired(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 480, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 608, in load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <Member at 0x123668fd0> is not bound to a Session; attribute refresh operation cannot proceed



Error in test test_return_fullname_with_email (opengever.meeting.tests.test_protocol.TestFormatParticipant)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 492, in test_return_fullname_with_email
    member.get_title())
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/member.py", line 68, in get_title
    fullname = escape_html(self.fullname)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 573, in get
    value = state._load_expired(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 480, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 608, in load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <Member at 0x1195a0f90> is not bound to a Session; attribute refresh operation cannot proceed



Error in test test_return_fullname_without_linked_email (opengever.meeting.tests.test_protocol.TestFormatParticipant)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 502, in test_return_fullname_without_linked_email
    member.get_title(show_email_as_link=False))
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/member.py", line 68, in get_title
    fullname = escape_html(self.fullname)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 573, in get
    value = state._load_expired(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 480, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 608, in load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <Member at 0x125800810> is not bound to a Session; attribute refresh operation cannot proceed



Error in test test_excerpt_json_does_not_contain_start_page (opengever.meeting.tests.test_protocol_json_data.TestExcerptJsonData)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol_json_data.py", line 125, in test_excerpt_json_does_not_contain_start_page
    data = ExcerptProtocolData(self.meeting).data
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/protocol.py", line 29, in __init__
    self.agenda_items = agenda_items or self.meeting.agenda_items
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Meeting at 0x128b61590> is not bound to a Session; lazy load operation of attribute 'agenda_items' cannot proceed



Error in test test_add_members_handles_participants_are_no_longer_committee_memberships (opengever.meeting.tests.test_protocol_json_data.TestProtocolJsonData)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol_json_data.py", line 89, in setUp
    decision_number=1))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x117375ed0> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_protocol_json (opengever.meeting.tests.test_protocol_json_data.TestProtocolJsonData)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol_json_data.py", line 89, in setUp
    decision_number=1))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x1279aae90> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Failure in test test_all_users_of_the_inbox_group_are_inbox_representatives (opengever.ogds.base.tests.test_actor_lookup.TestActorRepresentatives)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_actor_lookup.py", line 126, in test_all_users_of_the_inbox_group_are_inbox_representatives
    actor.representatives())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 898, in assertItemsEqual
    return self.assertSequenceEqual(expected, actual, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Sequences differ: [<User james>, <User hugo.boss... != [<User test_user_1_>, <User hu...

First differing element 0:
<User james>
<User test_user_1_>

- [<User james>, <User hugo.boss>, <User test_user_1_>]
+ [<User test_user_1_>, <User hugo.boss>, <User james>]



Error in test test_user_contact_sort_dict_extend_sort_dict_with_all_contacts (opengever.ogds.base.tests.test_sort_helpers.TestUserSortDict)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_sort_helpers.py", line 16, in setUp
    .having(title=u'Landesarchiv'))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Landesarchiv', 'enabled': True, 'unit_id': 'arch', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_user_contact_sort_dict_is_not_none_for_emtpy_contacts (opengever.ogds.base.tests.test_sort_helpers.TestUserSortDict)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_sort_helpers.py", line 16, in setUp
    .having(title=u'Landesarchiv'))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Landesarchiv', 'enabled': True, 'unit_id': 'arch', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_user_sort_dict_returns_a_dict_with_userid_as_key_fullname_as_value_includings_inboxes (opengever.ogds.base.tests.test_sort_helpers.TestUserSortDict)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_sort_helpers.py", line 16, in setUp
    .having(title=u'Landesarchiv'))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Landesarchiv', 'enabled': True, 'unit_id': 'arch', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_user_details (opengever.ogds.base.tests.test_userdetails.TestUserDetails)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_userdetails.py", line 14, in test_user_details
    browser.open(self.portal, view='@@user-details/hugo.boss')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/python/cache/eggs/grokcore.view-2.8-py2.7.egg/grokcore/view/components.py", line 150, in __call__
    return self._render_template()
  File "/Users/jone/projects/python/cache/eggs/grokcore.view-2.8-py2.7.egg/grokcore/view/components.py", line 154, in _render_template
    return self.template.render(self)
  File "/Users/jone/projects/python/cache/eggs/five.grok-1.3.2-py2.7.egg/five/grok/components.py", line 130, in render
    return template.pt_render(namespace)
  File "/Users/jone/projects/python/cache/eggs/zope.pagetemplate-3.6.3-py2.7.egg/zope/pagetemplate/pagetemplate.py", line 132, in pt_render
    strictinsert=0, sourceAnnotations=sourceAnnotations
  File "/Users/jone/projects/python/cache/eggs/zope.pagetemplate-3.6.3-py2.7.egg/zope/pagetemplate/pagetemplate.py", line 240, in __call__
    interpreter()
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 271, in __call__
    self.interpret(self.program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 888, in do_useMacro
    self.interpret(macro)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 533, in do_optTag_tal
    self.do_optTag(stuff)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 518, in do_optTag
    return self.no_tag(start, program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 954, in do_defineSlot
    self.interpret(block)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 533, in do_optTag_tal
    self.do_optTag(stuff)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 518, in do_optTag
    return self.no_tag(start, program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 858, in do_defineMacro
    self.interpret(macro)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 954, in do_defineSlot
    self.interpret(block)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 533, in do_optTag_tal
    self.do_optTag(stuff)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 518, in do_optTag
    return self.no_tag(start, program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 946, in do_defineSlot
    self.interpret(slot)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 533, in do_optTag_tal
    self.do_optTag(stuff)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 518, in do_optTag
    return self.no_tag(start, program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 858, in do_defineMacro
    self.interpret(macro)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/Users/jone/projects/python/cache/eggs/zope.tal-3.5.2-py2.7.egg/zope/tal/talinterpreter.py", line 583, in do_setLocal_tal
    self.engine.setLocal(name, self.engine.evaluateValue(expr))
  File "/Users/jone/projects/python/cache/eggs/zope.tales-3.5.3-py2.7.egg/zope/tales/tales.py", line 696, in evaluate
    return expression(self)
   - /Users/jone/projects/2packages/opengever.core/opengever/ogds/base/browser/userdetails_templates/userdetails.pt
   - Line 11, Column 6
   - Expression: <PathExpr standard:u'view/get_userdata'>
   - Names:
      {'args': (),
       'container': <PloneSite at /plone>,
       'context': <PloneSite at /plone>,
       'default': <object object at 0x100294bb0>,
       'here': <PloneSite at /plone>,
       'loop': {},
       'nothing': None,
       'options': {},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0x125fa1c00>,
       'request': <HTTPRequest, URL=None>,
       'root': <Application at >,
       'static': None,
       'template': <Products.Five.browser.pagetemplatefile.ViewPageTemplateFile object at 0x1150f2490>,
       'traverse_subpath': [],
       'user': <SpecialUser 'Anonymous User'>,
       'view': <opengever.ogds.base.browser.userdetails.UserDetails object at 0x12c4ed990>,
       'views': <Products.Five.browser.pagetemplatefile.ViewMapper object at 0x12581ccd0>}
  File "/Users/jone/projects/python/cache/eggs/zope.tales-3.5.3-py2.7.egg/zope/tales/expressions.py", line 217, in __call__
    return self._eval(econtext)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/Products/PageTemplates/Expressions.py", line 155, in _eval
    return render(ob, econtext.vars)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/Products/PageTemplates/Expressions.py", line 117, in render
    ob = ob()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/browser/userdetails.py", line 31, in get_userdata
    raise NotFound
NotFound



Error in test test_active_unit_has_class_active (opengever.ogds.base.tests.test_viewlet_ou_selector.TestOrgUnitSelectorViewlet)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_viewlet_ou_selector.py", line 82, in setUp
    admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Client 2', 'enabled': True, 'unit_id': u'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_active_unit_is_not_linked (opengever.ogds.base.tests.test_viewlet_ou_selector.TestOrgUnitSelectorViewlet)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_viewlet_ou_selector.py", line 82, in setUp
    admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Client 2', 'enabled': True, 'unit_id': u'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_first_unit_is_marked_as_active_per_default (opengever.ogds.base.tests.test_viewlet_ou_selector.TestOrgUnitSelectorViewlet)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_viewlet_ou_selector.py", line 82, in setUp
    admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Client 2', 'enabled': True, 'unit_id': u'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_list_all_assigned_units (opengever.ogds.base.tests.test_viewlet_ou_selector.TestOrgUnitSelectorViewlet)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_viewlet_ou_selector.py", line 82, in setUp
    admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Client 2', 'enabled': True, 'unit_id': u'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_list_only_current_admin_units_org_units (opengever.ogds.base.tests.test_viewlet_ou_selector.TestOrgUnitSelectorViewlet)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_viewlet_ou_selector.py", line 82, in setUp
    admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Client 2', 'enabled': True, 'unit_id': u'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_selecting_a_unit_changes_active_unit (opengever.ogds.base.tests.test_viewlet_ou_selector.TestOrgUnitSelectorViewlet)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_viewlet_ou_selector.py", line 82, in setUp
    admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Client 2', 'enabled': True, 'unit_id': u'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_units_are_sorted_alphabetically (opengever.ogds.base.tests.test_viewlet_ou_selector.TestOrgUnitSelectorViewlet)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_viewlet_ou_selector.py", line 82, in setUp
    admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Client 2', 'enabled': True, 'unit_id': u'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_org_unit_selector_visible_for_multiple_org_units (opengever.ogds.base.tests.test_viewlet_ou_selector.TestOrgUnitSelectorViewletIsAvailable)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_viewlet_ou_selector.py", line 40, in test_org_unit_selector_visible_for_multiple_org_units
    .having(title=u'Unit 2', admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 31, in create
    obj = self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/sql.py", line 91, in after_create
    get_ou_selector().set_current_unit(obj.id())
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/utils.py", line 92, in get_ou_selector
    users_units = ogds_service().assigned_org_units(member.getId())
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/utils.py", line 44, in assigned_org_units
    org_units = super(PloneOGDSService, self).assigned_org_units(userid)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/service.py", line 42, in assigned_org_units
    return query.all()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2398, in all
    return list(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2514, in __iter__
    self.session._autoflush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1292, in _autoflush
    util.raise_from_cause(e)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1282, in _autoflush
    self.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely) (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Unit 2', 'enabled': True, 'unit_id': u'unit 2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_exclude_inactive_clients_inboxes (opengever.ogds.base.tests.test_vocabularies.TestAllUsersAndInboxesVocabulary)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_vocabularies.py", line 213, in test_exclude_inactive_clients_inboxes
    .having(admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': 'client2', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_terms_are_marked_with_client_prefix_in_a_multiclient_setup (opengever.ogds.base.tests.test_vocabularies.TestAllUsersAndInboxesVocabulary)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_vocabularies.py", line 187, in test_terms_are_marked_with_client_prefix_in_a_multiclient_setup
    .having(title=u'Client2', admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': u'Client2', 'enabled': True, 'unit_id': 'client2', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_contains_all_clients_assigned_to_the_current_client (opengever.ogds.base.tests.test_vocabularies.TestAssignedClientsVocabularies)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_vocabularies.py", line 432, in setUp
    .having(admin_unit=admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': 'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_other_assigned_vocabulary_does_not_include_the_current_client (opengever.ogds.base.tests.test_vocabularies.TestAssignedClientsVocabularies)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_vocabularies.py", line 432, in setUp
    .having(admin_unit=admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': 'client2', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]



Error in test test_contains_all_org_units (opengever.ogds.base.tests.test_vocabularies.TestOrgUnitsVocabularyFactory)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/tests/test_vocabularies.py", line 506, in test_contains_all_org_units
    admin_unit=admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': 'Regierungsrat', 'enabled': True, 'unit_id': 'rr', 'users_group_id': 'foo', 'admin_unit_id': u'foo'}]

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-PgJ3d_.html

Failure in test test_successor_is_also_updated_when_modify_predecessors_deadline (opengever.task.tests.test_deadline_modification.TestDeadlineModificationForm)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/task/tests/test_deadline_modification.py", line 104, in test_successor_is_also_updated_when_modify_predecessors_deadline
    self.assertEquals(succesor.deadline, datetime.date(2013, 10, 1))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: datetime.date(2013, 1, 1) != datetime.date(2013, 10, 1)



Error in test test_inbox_group_of_the_responsible_client_has_the_same_localroles_as_the_responsible_in_a_multiclient_setup (opengever.task.tests.test_localroles.TestLocalRolesSetter)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/task/tests/test_localroles.py", line 95, in test_inbox_group_of_the_responsible_client_has_the_same_localroles_as_the_responsible_in_a_multiclient_setup
    .having(admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': 'additional', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_issuer_is_prefixed_by_current_org_unit_on_a_multiclient_setup (opengever.task.tests.test_overview.TestTaskOverview)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/task/tests/test_overview.py", line 50, in test_issuer_is_prefixed_by_current_org_unit_on_a_multiclient_setup
    .having(admin_unit=self.admin_unit))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': 'client2', 'users_group_id': 'foo', 'admin_unit_id': u'client1'}]



Error in test test_set_predecessor_resets_issuing_org_unit_to_predecessors_one (opengever.task.tests.test_successor.TestSuccessorTaskController)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/task/tests/test_successor.py", line 77, in test_set_predecessor_resets_issuing_org_unit_to_predecessors_one
    .id(u'additional'))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 32, in create
    self.persist()
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 43, in persist
    transaction.commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
    return self.get().commit()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
    self._commitResources()
  File "/Users/jone/projects/python/cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 441, in _commitResources
    rm.tpc_begin(self)
  File "/Users/jone/projects/python/cache/eggs/zope.sqlalchemy-0.7.6-py2.7.egg/zope/sqlalchemy/datamanager.py", line 90, in tpc_begin
    self.session.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 532, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 174, in save_obj
    mapper, table, insert)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 728, in _emit_insert_statements
    execute(statement, multiparams)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (psycopg2.IntegrityError) insert or update on table "org_units" violates foreign key constraint "org_units_users_group_id_fkey"
DETAIL:  Key (users_group_id)=(foo) is not present in table "groups".
 [SQL: 'INSERT INTO org_units (unit_id, title, enabled, users_group_id, inbox_group_id, admin_unit_id) VALUES (%(unit_id)s, %(title)s, %(enabled)s, %(users_group_id)s, %(inbox_group_id)s, %(admin_unit_id)s)'] [parameters: {'inbox_group_id': 'bar', 'title': None, 'enabled': True, 'unit_id': u'additional', 'users_group_id': 'foo', 'admin_unit_id': u'additional'}]

error parsing dom, failure to add csrf token to response for url http://nohost/plone/dossier-1/task-1/addresponse
error parsing dom, failure to add csrf token to response for url http://nohost/plone/dossier-1/task-1/addresponse
bar-doesnt.exist
ftw.tabbedview-foo-tabbedview_view-bar-new.user
ftw.tabbedview-foo-tabbedview_view-bar-new-user
baz-new.user
  Ran 2129 tests with 29 failures, 78 errors and 6 skipped in 58 minutes 28.886 seconds.
Running opengever.core.testing.ActivityLayer tests:
  Set up opengever.core.testing.ActivityLayer in 0.032 seconds.


Failure in test test_mail_dispatcher_respects_dispatcher_roles_even_if_its_a_group (opengever.activity.tests.test_mail.TestEmailNotification)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_mail.py", line 110, in test_mail_dispatcher_respects_dispatcher_roles_even_if_its_a_group
    inbox_group.users.append(self.franz)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/collections.py", line 1072, in append
    item = __set(self, item, _sa_initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/collections.py", line 1044, in __set
    item = executor.fire_append_event(item, _sa_initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/collections.py", line 716, in fire_append_event
    item, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 936, in fire_append_event
    initiator or self._append_token or self._init_append_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 46, in append
    sess._save_or_update_state(item_state)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1596, in _save_or_update_state
    self._save_or_update_impl(st_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1846, in _save_or_update_impl
    self._update_impl(state)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1839, in _update_impl
    self.identity_map.add(state)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/identity.py", line 132, in add
    % (key, ))
AssertionError: A conflicting state is already present in the identity map for key (<class 'opengever.ogds.models.group.Group'>, (u'client1_users',))


ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-2Xf0kd.html

Failure in test test_task_title_is_linked_to_resolve_notification_view (opengever.activity.tests.test_mail.TestEmailNotification)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_mail.py", line 84, in test_task_title_is_linked_to_resolve_notification_view
    self.assertIn(link, html_part)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 813, in assertIn
    self.fail(self._formatMessage(msg, standardMsg))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: '<p><a href=3D"http://example.com/@@resolve_notification?notification_id=\n=3D1">Test Task</a></p>' not found in 'Content-Type: text/html; charset="utf-8"\nMIME-Version: 1.0\nContent-Transfer-Encoding: quoted-printable\n\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.=\nw3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns=3D"http://www.w3.org/1999/xhtml">\n\n  <head><meta name=3D"viewport" content=3D"width=3Ddevice-width, initial-sc=\nale=3D1.0" />\n\n    <title>New task added by Test User</title>\n    <style>\n      body{\n        font-family: sans-serif;\n        font-size: 85%;\n      }\n\n      .notification_label {\n        padding-bottom: 5px;\n\n      }\n      .label {\n        font-weight: bold;\n        text-align: left;\n        padding-right: 1em;\n        }\n\n      .details {\n        padding-top: 15px;\n        }\n    </style>\n\n  </head>\n\n  <body>\n    <p class=3D"notification_label">New task added by Test User</p>\n\n    <p><a href=3D"http://example.com/@@resolve_notification?notification_id=\n=3D2">Test Task</a></p>\n\n    =\n\n      <p class=3D"details">Details:</p>\n      <div><table><tbody><tr><td class=3D"label">Task title</td><td>Test Ta=\nsk</td></tr><tr><td class=3D"label">Deadline</td><td>Mar 22, 2017</td></tr>=\n<tr><td class=3D"label">Task Type</td><td>To comment</td></tr><tr><td class=\n=3D"label">Dossier title</td><td>Dossier A</td></tr><tr><td class=3D"label"=\n>Text</td><td>-</td></tr></tbody></table></div>\n    =\n\n  </body>\n\n</html>\n'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-Zf4SVd.html

Error in test test_mark_multiple_notifications_as_read (opengever.activity.tests.test_views.TestMarkAsRead)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_views.py", line 69, in test_mark_multiple_notifications_as_read
    self.assertTrue(notifications[0].is_read)
IndexError: list index out of range

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-RNnljc.html

Error in test test_mark_single_notification_as_read (opengever.activity.tests.test_views.TestMarkAsRead)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/activity/tests/test_views.py", line 57, in test_mark_single_notification_as_read
    self.assertTrue(notifications[0].is_read)
IndexError: list index out of range

  Ran 55 tests with 31 failures, 2 errors and 0 skipped in 1 minutes 57.383 seconds.
Running opengever.core.testing.BumblebeeLayer tests:
  Tear down opengever.core.testing.ActivityLayer in 0.003 seconds.
  Set up opengever.core.testing.BumblebeeLayer in 0.031 seconds.
  Ran 136 tests with 31 failures, 0 errors and 0 skipped in 3 minutes 30.528 seconds.
Running opengever.core.testing.DossierTemplateLayer tests:
  Tear down opengever.core.testing.BumblebeeLayer in 0.003 seconds.
  Set up opengever.core.testing.DossierTemplateLayer in 0.026 seconds.
  Ran 50 tests with 31 failures, 0 errors and 0 skipped in 1 minutes 37.704 seconds.
Running opengever.core.testing.FilingLayer tests:
  Tear down opengever.core.testing.DossierTemplateLayer in 0.003 seconds.
  Set up opengever.core.testing.FilingLayer in 0.116 seconds.
  Ran 5 tests with 31 failures, 0 errors and 0 skipped in 8.267 seconds.
Running opengever.core.testing.MeetingLayer tests:
  Tear down opengever.core.testing.FilingLayer in 0.003 seconds.
  Set up opengever.core.testing.MeetingLayer in 0.031 seconds.
 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-JuHkMY.html

Failure in test test_decide_agenda_item_creates_locked_excerpt_in_dossier (opengever.meeting.tests.test_agendaitem.TestAgendaItemDecide)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 353, in test_decide_agenda_item_creates_locked_excerpt_in_dossier
    message_links[0].get('href'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/submitted-proposal-1/document-3' != 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/submitted-proposal-2/document-3'



Error in test test_decide_an_decided_agenda_item_is_ignored (opengever.meeting.tests.test_agendaitem.TestAgendaItemDecide)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 280, in test_decide_an_decided_agenda_item_is_ignored
    item.decide()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 319, in decide
    if self.has_proposal:
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 243, in has_proposal
    return self.proposal is not None
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <AgendaItem at 0x119bdef50> is not bound to a Session; lazy load operation of attribute 'proposal' cannot proceed



Error in test test_meeting_is_held_when_deciding_an_agendaitem (opengever.meeting.tests.test_agendaitem.TestAgendaItemDecide)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 273, in test_meeting_is_held_when_deciding_an_agendaitem
    item.decide()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 319, in decide
    if self.has_proposal:
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 243, in has_proposal
    return self.proposal is not None
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <AgendaItem at 0x133471f90> is not bound to a Session; lazy load operation of attribute 'proposal' cannot proceed

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-a4Km0D.html

Failure in test test_update_agenda_item_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_agendaitem.TestAgendaItemDecide)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 399, in test_update_agenda_item_raise_unauthorized_when_meeting_is_not_editable
    view='agenda_items/{}/decide'.format(item.agenda_item_id))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 114, in __exit__
    "%s not raised" % (exc_name,))
AssertionError: Unauthorized not raised

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-I_hVVr.html

Failure in test test_update_agenda_item_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_agendaitem.TestAgendaItemDelete)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 264, in test_update_agenda_item_raise_unauthorized_when_meeting_is_not_editable
    view='agenda_items/{}/delete'.format(item.agenda_item_id))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 114, in __exit__
    "%s not raised" % (exc_name,))
AssertionError: Unauthorized not raised

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-LaD6ho.html

Failure in test test_update_agenda_item_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_agendaitem.TestAgendaItemEdit)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 211, in test_update_agenda_item_raise_unauthorized_when_meeting_is_not_editable
    data={'title': 'bar'})
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 114, in __exit__
    "%s not raised" % (exc_name,))
AssertionError: Unauthorized not raised



Error in test test_when_title_is_too_long_returns_json_error (opengever.meeting.tests.test_agendaitem.TestAgendaItemEdit)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 181, in test_when_title_is_too_long_returns_json_error
    title=u'foo', meeting=self.meeting, proposal=proposal))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x129141990> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_agendaitem.TestAgendaItemReopen)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 474, in test_raise_unauthorized_when_meeting_is_not_editable
    item.decide()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 319, in decide
    if self.has_proposal:
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 243, in has_proposal
    return self.proposal is not None
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <AgendaItem at 0x1326b0e10> is not bound to a Session; lazy load operation of attribute 'proposal' cannot proceed



Error in test test_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_agendaitem.TestAgendaItemRevise)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 549, in test_raise_unauthorized_when_meeting_is_not_editable
    item.decide()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 319, in decide
    if self.has_proposal:
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 243, in has_proposal
    return self.proposal is not None
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <AgendaItem at 0x1165d86d0> is not bound to a Session; lazy load operation of attribute 'proposal' cannot proceed



Error in test test_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_agendaitem.TestAgendaItemUpdateOrder)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 593, in test_raise_unauthorized_when_meeting_is_not_editable
    view='agenda_items/update_order')
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/agendaitem.py", line 167, in update_order
    json.loads(self.request.get('sortOrder')))
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/json/__init__.py", line 338, in loads
    return _default_decoder.decode(s)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
TypeError: expected string or buffer

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-myAAhY.html

Error in test test_update_agenda_item_order (opengever.meeting.tests.test_agendaitem.TestAgendaItemUpdateOrder)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 578, in test_update_agenda_item_order
    self.assertEqual(1, AgendaItem.get(1).sort_order)
AttributeError: 'NoneType' object has no attribute 'sort_order'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-qVD9OA.html

Failure in test test_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_agendaitem.TestScheduleParagraph)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 616, in test_raise_unauthorized_when_meeting_is_not_editable
    view='agenda_items/schedule_paragraph')
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 114, in __exit__
    "%s not raised" % (exc_name,))
AssertionError: Unauthorized not raised

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-a_iQ1e.html

Failure in test test_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_agendaitem.TestScheduleText)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem.py", line 639, in test_raise_unauthorized_when_meeting_is_not_editable
    view='agenda_items/schedule_paragraph')
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 114, in __exit__
    "%s not raised" % (exc_name,))
AssertionError: Unauthorized not raised

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-ZPxuUb.html

Failure in test test_contains_proposal_and_freetext_agendaitems (opengever.meeting.tests.test_agendaitem_list.TestAgendaItemList)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_agendaitem_list.py", line 178, in test_contains_proposal_and_freetext_agendaitems
    browser.json.get('agenda_items'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [{u'html:initial_position': u'... != [{u'html:initial_position': No...

First differing element 0:
{u'html:initial_position': u'We should do it.', u'repository_folder_title': u'', u'description': u'Mach doch', u'html:decision_draft': u'Proposal approved', u'html:disclose_to': None, u'html:copy_for_attention': None, u'html:legal_basis': u'We may do it', u'title': u'Mach doch', u'html:discussion': u'I say Nay!', u'number': u'1.', u'html:proposed_action': u'Do it.', u'dossier_reference_number': u'Client1 1 / 1', u'decision_number': None, u'html:decision': u'Proposal approved', u'is_paragraph': False, u'html:publish_in': None, u'html:considerations': u'Uhm....'}
{u'html:initial_position': None, u'html:disclose_to': None, u'repository_folder_title': None, u'description': u'foo', u'html:decision_draft': None, u'title': u'foo', u'html:copy_for_attention': None, u'html:discussion': None, u'number': u'1.', u'html:proposed_action': None, u'dossier_reference_number': None, u'decision_number': None, u'html:decision': None, u'is_paragraph': False, u'html:considerations': None, u'html:publish_in': None, u'html:legal_basis': None}

  [{u'decision_number': None,
+   u'description': u'foo',
+   u'dossier_reference_number': None,
+   u'html:considerations': None,
+   u'html:copy_for_attention': None,
+   u'html:decision': None,
+   u'html:decision_draft': None,
+   u'html:disclose_to': None,
+   u'html:discussion': None,
+   u'html:initial_position': None,
+   u'html:legal_basis': None,
+   u'html:proposed_action': None,
+   u'html:publish_in': None,
+   u'is_paragraph': False,
+   u'number': u'1.',
+   u'repository_folder_title': None,
+   u'title': u'foo'},
+  {u'decision_number': None,
    u'description': u'Mach doch',
    u'dossier_reference_number': u'Client1 1 / 1',
    u'html:considerations': u'Uhm....',
    u'html:copy_for_attention': None,
    u'html:decision': u'Proposal approved',
    u'html:decision_draft': u'Proposal approved',
    u'html:disclose_to': None,
    u'html:discussion': u'I say Nay!',
    u'html:initial_position': u'We should do it.',
    u'html:legal_basis': u'We may do it',
    u'html:proposed_action': u'Do it.',
    u'html:publish_in': None,
    u'is_paragraph': False,
-   u'number': u'1.',
?                ^

+   u'number': u'2.',
?                ^

    u'repository_folder_title': u'',
-   u'title': u'Mach doch'},
?                          ^

+   u'title': u'Mach doch'}]
?                          ^

-  {u'decision_number': None,
-   u'description': u'foo',
-   u'dossier_reference_number': None,
-   u'html:considerations': None,
-   u'html:copy_for_attention': None,
-   u'html:decision': None,
-   u'html:decision_draft': None,
-   u'html:disclose_to': None,
-   u'html:discussion': None,
-   u'html:initial_position': None,
-   u'html:legal_basis': None,
-   u'html:proposed_action': None,
-   u'html:publish_in': None,
-   u'is_paragraph': False,
-   u'number': u'2.',
-   u'repository_folder_title': None,
-   u'title': u'foo'}]

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-sjTrAH.html

Error in test test_manual_excerpt_can_be_generated (opengever.meeting.tests.test_excerpt.TestExcerpt)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_excerpt.py", line 184, in test_manual_excerpt_can_be_generated
    'Target dossier': self.dossier})
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 613, in fill
    form = self.find_form_by_fields(*values.keys())
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 739, in find_form_by_fields
    raise FormFieldNotFound(label_or_name, self.form_field_labels)
FormFieldNotFound: Could not find form field: "agenda_item-1.include:record". Fields: "Search Site", "only in current section", "dossier-2", "form.widgets.dossier-empty-marker", "form.widgets.dossier.widgets.query", "form.widgets.dossier.buttons.search", "Title", "Include initial position", "form.widgets.include_initial_position-empty-marker", "Include legal basis", "form.widgets.include_legal_basis-empty-marker", "Include considerations", "form.widgets.include_considerations-empty-marker", "Include proposed action", "form.widgets.include_proposed_action-empty-marker", "Include discussion", "form.widgets.include_discussion-empty-marker", "Include decision", "form.widgets.include_decision-empty-marker", "Include publish in", "form.widgets.include_publish_in-empty-marker", "Include disclose to", "form.widgets.include_disclose_to-empty-marker", "Include copy for attention", "form.widgets.include_copy_for_attention-empty-marker", "1. Mach doch", "form.buttons.save", "form.buttons.cancel", "_authenticator"

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-vQ_Rb6.html

Error in test test_validator_excerpt_requires_at_least_one_field (opengever.meeting.tests.test_excerpt.TestExcerpt)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_excerpt.py", line 221, in test_validator_excerpt_requires_at_least_one_field
    'Target dossier': self.dossier})
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 613, in fill
    form = self.find_form_by_fields(*values.keys())
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 739, in find_form_by_fields
    raise FormFieldNotFound(label_or_name, self.form_field_labels)
FormFieldNotFound: Could not find form field: "agenda_item-1.include:record". Fields: "Search Site", "only in current section", "dossier-2", "form.widgets.dossier-empty-marker", "form.widgets.dossier.widgets.query", "form.widgets.dossier.buttons.search", "Title", "Include initial position", "form.widgets.include_initial_position-empty-marker", "Include legal basis", "form.widgets.include_legal_basis-empty-marker", "Include considerations", "form.widgets.include_considerations-empty-marker", "Include proposed action", "form.widgets.include_proposed_action-empty-marker", "Include discussion", "form.widgets.include_discussion-empty-marker", "Include decision", "form.widgets.include_decision-empty-marker", "Include publish in", "form.widgets.include_publish_in-empty-marker", "Include disclose to", "form.widgets.include_disclose_to-empty-marker", "Include copy for attention", "form.widgets.include_copy_for_attention-empty-marker", "1. Mach doch", "form.buttons.save", "form.buttons.cancel", "_authenticator"



Error in test test_updates_excerpt_in_dossier_after_checkin (opengever.meeting.tests.test_excerpt.TestSyncExcerpt)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_excerpt.py", line 38, in setUp
    excerpt_document=self.excerpt_in_dossier)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x128b536d0> is not bound to a Session; lazy load operation of attribute 'proposal' cannot proceed



Error in test test_updates_excerpt_in_dossier_after_modification (opengever.meeting.tests.test_excerpt.TestSyncExcerpt)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_excerpt.py", line 38, in setUp
    excerpt_document=self.excerpt_in_dossier)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x124ca8f10> is not bound to a Session; lazy load operation of attribute 'proposal' cannot proceed



Error in test test_updates_excerpt_in_dossier_after_revert (opengever.meeting.tests.test_excerpt.TestSyncExcerpt)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_excerpt.py", line 38, in setUp
    excerpt_document=self.excerpt_in_dossier)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x11e097ed0> is not bound to a Session; lazy load operation of attribute 'proposal' cannot proceed

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-DudOW0.html

Failure in test test_editing_a_protocol_locks_meeting (opengever.meeting.tests.test_locking.TestMeetingLocking)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_locking.py", line 69, in test_editing_a_protocol_locks_meeting
    self.assertEquals('Meeting:1', lock.get('token'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'Meeting:1' != 'Meeting:2'



Failure in test test_protocol_raise_redirect_back_to_meeting_view_when_protocol_is_locked (opengever.meeting.tests.test_locking.TestMeetingLocking)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_locking.py", line 113, in test_protocol_raise_redirect_back_to_meeting_view_when_protocol_is_locked
    str(cm.exception))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-1' != 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-2'



Failure in test test_return_member_as_value (opengever.meeting.tests.test_meeting.TestCommitteeMemberVocabulary)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting.py", line 172, in test_return_member_as_value
    vocabulary._terms[0].value)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: <opengever.meeting.model.member.Member object at 0x1283499d0> != <Member u'Hans M\xfcller'>



Failure in test test_meeting_link (opengever.meeting.tests.test_meeting.TestMeeting)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting.py", line 61, in test_meeting_link
    link.get('href'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-1/view' != 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-2/view'



Error in test test_accessing_the_meeting_directly_shows_meeting_view (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x135e7c290> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_generated_exceprts_exists (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x13660e450> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_generated_protocol_exists (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x13796dd50> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_meeting_dossier_is_linked_from_meeting_view (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x137ce7850> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_metadata_no_endtime_must_not_raise (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x1379f0d90> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_metadata_starttime_is_existing (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x1366cd510> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_metadata_state_pending_exists (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x11fdba610> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_participants_listing_empty_participants_must_not_raise (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x124063150> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_participants_listing_no_precidency_must_not_raise (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x12efc02d0> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_participants_listing_no_secretary_must_not_raise (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x130564e90> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_participants_listing_participants_is_existing (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x129877650> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_participants_listing_precidency_is_existing (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x134d5f190> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_participants_listing_secretary_is_existing (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x12c537f10> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_site_title_is_meeting_title (opengever.meeting.tests.test_meeting_view.TestMeetingView)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_meeting_view.py", line 79, in setUp
    .relate_to(self.attachement))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/dexterity.py", line 57, in create
    self.after_create(obj)
  File "/Users/jone/projects/2packages/opengever.core/opengever/testing/builders/dx.py", line 316, in after_create
    obj.create_model(self.model_arguments, self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 51, in create_model
    model_instance = self.model_class(oguid=oguid, **data)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <GeneratedExcerpt at 0x115b80190> is not bound to a Session; lazy load operation of attribute 'submitted_proposal' cannot proceed



Error in test test_member_link (opengever.meeting.tests.test_members.TestMemberListing)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_members.py", line 58, in test_member_link
    link = self.member.get_link(self.container)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/member.py", line 35, in get_link
    title = title or self.fullname
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 573, in get
    value = state._load_expired(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 480, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 608, in load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <Member at 0x1358c3610> is not bound to a Session; attribute refresh operation cannot proceed



Error in test test_actual_membership_is_active (opengever.meeting.tests.test_memberships.TestMemberships)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_memberships.py", line 156, in test_actual_membership_is_active
    Membership.query.only_active().all())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 675, in assertSequenceEqual
    seq1_repr = repr(seq1)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/membership.py", line 41, in __repr__
    repr(self.member.fullname),
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 573, in get
    value = state._load_expired(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 480, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 608, in load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <Member at 0x135ebbd10> is not bound to a Session; attribute refresh operation cannot proceed



Failure in test test_get_url (opengever.meeting.tests.test_memberships.TestMemberships)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_memberships.py", line 32, in test_get_url
    membership.get_url(self.committee))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/membership-1' != 'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/membership-2'



Error in test test_get_meeting_link_returns_empty_string_if_not_scheduled (opengever.meeting.tests.test_proposal.TestProposal)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposal.py", line 709, in test_get_meeting_link_returns_empty_string_if_not_scheduled
    self.assertEqual('', proposal.get_meeting_link())
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/proposal.py", line 381, in get_meeting_link
    agenda_item = self.agenda_item
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x120cbfbd0> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_get_meeting_link_returns_link_if_scheduled (opengever.meeting.tests.test_proposal.TestProposal)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposal.py", line 717, in test_get_meeting_link_returns_link_if_scheduled
    create(Builder('agenda_item').having(meeting=meeting, proposal=proposal))
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x132216c10> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_removing_from_schedule_creates_history_entry (opengever.meeting.tests.test_proposalhistory.TestProposalHistory)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposalhistory.py", line 165, in test_removing_from_schedule_creates_history_entry
    self.meeting.get_url(view='unscheduled_proposals/1/schedule'))
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/unscheduled_proposals.py", line 46, in schedule_proposal
    raise NotFound
NotFound



Error in test test_reopening_creates_history_entry (opengever.meeting.tests.test_proposalhistory.TestProposalHistory)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposalhistory.py", line 179, in test_reopening_creates_history_entry
    self.meeting.get_url(view='unscheduled_proposals/1/schedule'))
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/unscheduled_proposals.py", line 46, in schedule_proposal
    raise NotFound
NotFound



Error in test test_revising_creates_history_entry (opengever.meeting.tests.test_proposalhistory.TestProposalHistory)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposalhistory.py", line 195, in test_revising_creates_history_entry
    self.meeting.get_url(view='unscheduled_proposals/1/schedule'))
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/unscheduled_proposals.py", line 46, in schedule_proposal
    raise NotFound
NotFound



Error in test test_scheduling_creates_history_entry (opengever.meeting.tests.test_proposalhistory.TestProposalHistory)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_proposalhistory.py", line 154, in test_scheduling_creates_history_entry
    self.meeting.get_url(view='unscheduled_proposals/1/schedule'))
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/unscheduled_proposals.py", line 46, in schedule_proposal
    raise NotFound
NotFound



Error in test test_decided_agenda_items_will_not_be_loaded_in_editor (opengever.meeting.tests.test_protocol.TestProtocol)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 441, in test_decided_agenda_items_will_not_be_loaded_in_editor
    agenda_item.decide()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 319, in decide
    if self.has_proposal:
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 243, in has_proposal
    return self.proposal is not None
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 237, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <AgendaItem at 0x13c4ac910> is not bound to a Session; lazy load operation of attribute 'proposal' cannot proceed

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-GQHSiQ.html

Failure in test test_protocol_can_be_edited_and_strips_whitespace (opengever.meeting.tests.test_protocol.TestProtocol)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 255, in test_protocol_can_be_edited_and_strips_whitespace
    browser.json)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 844, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: {u'redirectUrl': u'http://nohost/plone/opengever-meeting-committeecontainer/comm [truncated]... != {u'redirectUrl': u'http://nohost/plone/opengever-meeting-committeecontainer/comm [truncated]...
- {u'redirectUrl': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-1/view'}
?                                                                                                 ^

+ {u'redirectUrl': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-2/view'}
?                                                                                                 ^


 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-2Gdg_U.html

Failure in test test_protocol_displays_numbers_in_navigation (opengever.meeting.tests.test_protocol.TestProtocol)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 420, in test_protocol_displays_numbers_in_navigation
    ['1. Mach ize', '2. Mach doch'])
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: ['1. Mach doch', '2. Mach ize'... != ['1. Mach ize', '2. Mach doch'...

First differing element 0:
1. Mach doch
1. Mach ize

- ['1. Mach doch', '2. Mach ize']
+ ['1. Mach ize', '2. Mach doch']



Failure in test test_protocol_document_is_unlocked_when_meeting_is_closed (opengever.meeting.tests.test_protocol.TestProtocol)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 147, in test_protocol_document_is_unlocked_when_meeting_is_closed
    browser.find('Close meeting').click()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/nodes.py", line 665, in click
    self.browser.open(self.attrib['href'], referer=True)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/transitions.py", line 24, in __call__
    self.execute_transition(transition)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/transitions.py", line 41, in execute_transition
    return self.model.execute_transition(transition_name)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/meeting.py", line 278, in execute_transition
    self.workflow.execute_transition(self, self, name)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/workflow.py", line 88, in execute_transition
    transition.execute(obj, model)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/meeting.py", line 54, in execute
    model.close()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/meeting.py", line 211, in close
    agenda_item.close()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 301, in close
    self.decide()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 320, in decide
    self.proposal.decide(self)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/proposal.py", line 354, in decide
    self.execute_transition('scheduled-decided')
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/proposal.py", line 179, in execute_transition
    self.workflow.execute_transition(None, self, name)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/workflow.py", line 88, in execute_transition
    transition.execute(obj, model)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/workflow.py", line 47, in execute
    assert self.can_execute(model)
AssertionError



Failure in test test_protocol_is_generated_when_closing_meetings (opengever.meeting.tests.test_protocol.TestProtocol)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 163, in test_protocol_is_generated_when_closing_meetings
    browser.find('Close meeting').click()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/nodes.py", line 665, in click
    self.browser.open(self.attrib['href'], referer=True)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/transitions.py", line 24, in __call__
    self.execute_transition(transition)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/transitions.py", line 41, in execute_transition
    return self.model.execute_transition(transition_name)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/meeting.py", line 278, in execute_transition
    self.workflow.execute_transition(self, self, name)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/workflow.py", line 88, in execute_transition
    transition.execute(obj, model)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/meeting.py", line 54, in execute
    model.close()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/meeting.py", line 211, in close
    agenda_item.close()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 301, in close
    self.decide()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 320, in decide
    self.proposal.decide(self)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/proposal.py", line 354, in decide
    self.execute_transition('scheduled-decided')
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/proposal.py", line 179, in execute_transition
    self.workflow.execute_transition(None, self, name)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/workflow.py", line 88, in execute_transition
    transition.execute(obj, model)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/workflow.py", line 47, in execute
    assert self.can_execute(model)
AssertionError

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-DSL4kt.html

Failure in test test_protocol_participants_can_be_edited (opengever.meeting.tests.test_protocol.TestProtocol)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_protocol.py", line 304, in test_protocol_participants_can_be_edited
    browser.json)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 844, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: {u'redirectUrl': u'http://nohost/plone/opengever-meeting-committeecontainer/comm [truncated]... != {u'redirectUrl': u'http://nohost/plone/opengever-meeting-committeecontainer/comm [truncated]...
- {u'redirectUrl': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-1/view'}
?                                                                                                 ^

+ {u'redirectUrl': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-2/view'}
?                                                                                                 ^




Error in test test_database_entry_is_deleted_when_removing_proposal (opengever.meeting.tests.test_submit_additional_documents.TestSubmitAdditionalDocuments)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_submit_additional_documents.py", line 106, in test_database_entry_is_deleted_when_removing_proposal
    api.content.delete(self.document)
  File "<string>", line 2, in delete
  File "/Users/jone/projects/python/cache/eggs/plone.api-1.5-py2.7.egg/plone/api/validation.py", line 131, in wrapped
    return f(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/plone.api-1.5-py2.7.egg/plone/api/content.py", line 303, in delete
    obj.aq_parent.manage_delObjects([obj.getId()])
  File "/Users/jone/projects/python/cache/eggs/plone.dexterity-2.1.3-py2.7.egg/plone/dexterity/content.py", line 361, in manage_delObjects
    return super(Container, self).manage_delObjects(ids, REQUEST=REQUEST)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/OFS/ObjectManager.py", line 540, in manage_delObjects
    self._delObject(id)
  File "/Users/jone/projects/python/cache/eggs/Products.BTreeFolder2-2.13.3-py2.7.egg/Products/BTreeFolder2/BTreeFolder2.py", line 476, in _delObject
    notify(ObjectRemovedEvent(ob, self, id))
  File "/Users/jone/projects/python/cache/eggs/zope.event-3.5.2-py2.7.egg/zope/event/__init__.py", line 31, in notify
    subscriber(event)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py", line 24, in dispatch
    zope.component.subscribers(event, None)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 136, in subscribers
    return sitemanager.subscribers(objects, interface)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py", line 321, in subscribers
    return self.adapters.subscribers(objects, provided)
  File "/Users/jone/projects/python/cache/eggs/zope.interface-3.6.7-py2.7-macosx-10.4-x86_64.egg/zope/interface/adapter.py", line 585, in subscribers
    subscription(*objects)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py", line 32, in objectEventNotify
    zope.component.subscribers((event.object, event), None)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 136, in subscribers
    return sitemanager.subscribers(objects, interface)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py", line 321, in subscribers
    return self.adapters.subscribers(objects, provided)
  File "/Users/jone/projects/python/cache/eggs/zope.interface-3.6.7-py2.7-macosx-10.4-x86_64.egg/zope/interface/adapter.py", line 585, in subscribers
    subscription(*objects)
  File "/Users/jone/projects/python/cache/eggs/five.intid-1.0.3-py2.7.egg/five/intid/intid.py", line 120, in removeIntIdSubscriber
    notify(IntIdRemovedEvent(ob, event))
  File "/Users/jone/projects/python/cache/eggs/zope.event-3.5.2-py2.7.egg/zope/event/__init__.py", line 31, in notify
    subscriber(event)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py", line 24, in dispatch
    zope.component.subscribers(event, None)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 136, in subscribers
    return sitemanager.subscribers(objects, interface)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py", line 321, in subscribers
    return self.adapters.subscribers(objects, provided)
  File "/Users/jone/projects/python/cache/eggs/zope.interface-3.6.7-py2.7-macosx-10.4-x86_64.egg/zope/interface/adapter.py", line 585, in subscribers
    subscription(*objects)
  File "/Users/jone/projects/python/cache/eggs/z3c.relationfield-0.6.2-py2.7.egg/z3c/relationfield/event.py", line 111, in breakRelations
    notify(ObjectModifiedEvent(rel.from_object))
  File "/Users/jone/projects/python/cache/eggs/zope.event-3.5.2-py2.7.egg/zope/event/__init__.py", line 31, in notify
    subscriber(event)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py", line 24, in dispatch
    zope.component.subscribers(event, None)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 136, in subscribers
    return sitemanager.subscribers(objects, interface)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py", line 321, in subscribers
    return self.adapters.subscribers(objects, provided)
  File "/Users/jone/projects/python/cache/eggs/zope.interface-3.6.7-py2.7-macosx-10.4-x86_64.egg/zope/interface/adapter.py", line 585, in subscribers
    subscription(*objects)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py", line 32, in objectEventNotify
    zope.component.subscribers((event.object, event), None)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 136, in subscribers
    return sitemanager.subscribers(objects, interface)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py", line 321, in subscribers
    return self.adapters.subscribers(objects, provided)
  File "/Users/jone/projects/python/cache/eggs/zope.interface-3.6.7-py2.7-macosx-10.4-x86_64.egg/zope/interface/adapter.py", line 585, in subscribers
    subscription(*objects)
  File "/Users/jone/projects/python/cache/eggs/plone.dexterity-2.1.3-py2.7.egg/plone/dexterity/content.py", line 398, in reindexOnModify
    content.reindexObject()
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/cmf_catalog_aware.py", line 77, in reindexObject
    return original_reindexObject(self, idxs)
  File "/Users/jone/projects/python/cache/eggs/Products.CMFCore-2.2.7-py2.7.egg/Products/CMFCore/CMFCatalogAware.py", line 88, in reindexObject
    catalog.reindexObject(self, idxs=idxs)
  File "/Users/jone/projects/python/cache/eggs/Products.CMFCore-2.2.7-py2.7.egg/Products/CMFCore/CatalogTool.py", line 301, in reindexObject
    self.catalog_object(object, uid, idxs, update_metadata)
  File "/Users/jone/projects/python/cache/eggs/Products.CMFPlone-4.3.2-py2.7.egg/Products/CMFPlone/CatalogTool.py", line 353, in catalog_object
    update_metadata, pghandler=pghandler)
  File "/Users/jone/projects/python/cache/eggs/Products.ZCatalog-3.0.2-py2.7.egg/Products/ZCatalog/ZCatalog.py", line 476, in catalog_object
    update_metadata=update_metadata)
  File "/Users/jone/projects/python/cache/eggs/Products.ZCatalog-3.0.2-py2.7.egg/Products/ZCatalog/Catalog.py", line 347, in catalogObject
    self.updateMetadata(object, uid, index)
  File "/Users/jone/projects/python/cache/eggs/Products.ZCatalog-3.0.2-py2.7.egg/Products/ZCatalog/Catalog.py", line 292, in updateMetadata
    newDataRecord = self.recordify(object)
  File "/Users/jone/projects/python/cache/eggs/Products.ZCatalog-3.0.2-py2.7.egg/Products/ZCatalog/Catalog.py", line 415, in recordify
    attr = attr()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/proposal.py", line 179, in Title
    model = self.load_model()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 38, in load_model
    oguid = Oguid.for_object(self)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/oguid.py", line 34, in for_object
    return cls(get_current_admin_unit().id(), int_id)
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/utils.py", line 127, in get_current_admin_unit
    return ogds_service().fetch_admin_unit(proxy.current_unit_id)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/service.py", line 60, in fetch_admin_unit
    return self._query_admin_units(enabled_only=False).get(unit_id)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 818, in get
    return self._get_impl(ident, loading.load_on_ident)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 851, in _get_impl
    return fallback_fn(self, key)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 217, in load_on_ident
    return q.one()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2472, in one
    ret = list(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2514, in __iter__
    self.session._autoflush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1292, in _autoflush
    util.raise_from_cause(e)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1282, in _autoflush
    self.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 561, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 249, in delete_obj
    cached_connections, mapper, table, delete)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 853, in _emit_delete_statements
    c = connection.execute(statement, del_objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely) (psycopg2.IntegrityError) update or delete on table "submitteddocuments" violates foreign key constraint "proposalhistory_submitted_document_id_fkey" on table "proposalhistory"
DETAIL:  Key (id)=(2) is still referenced from table "proposalhistory".
 [SQL: 'DELETE FROM submitteddocuments WHERE submitteddocuments.id = %(id)s'] [parameters: {'id': 2}]



Error in test test_database_entry_is_deleted_when_removing_submitted_proposal (opengever.meeting.tests.test_submit_additional_documents.TestSubmitAdditionalDocuments)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_submit_additional_documents.py", line 89, in test_database_entry_is_deleted_when_removing_submitted_proposal
    api.content.delete(submitted_proposal)
  File "<string>", line 2, in delete
  File "/Users/jone/projects/python/cache/eggs/plone.api-1.5-py2.7.egg/plone/api/validation.py", line 131, in wrapped
    return f(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/plone.api-1.5-py2.7.egg/plone/api/content.py", line 303, in delete
    obj.aq_parent.manage_delObjects([obj.getId()])
  File "/Users/jone/projects/python/cache/eggs/plone.dexterity-2.1.3-py2.7.egg/plone/dexterity/content.py", line 361, in manage_delObjects
    return super(Container, self).manage_delObjects(ids, REQUEST=REQUEST)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/OFS/ObjectManager.py", line 540, in manage_delObjects
    self._delObject(id)
  File "/Users/jone/projects/python/cache/eggs/Products.BTreeFolder2-2.13.3-py2.7.egg/Products/BTreeFolder2/BTreeFolder2.py", line 477, in _delObject
    notifyContainerModified(self)
  File "/Users/jone/projects/python/cache/eggs/zope.container-3.11.2-py2.7-macosx-10.4-x86_64.egg/zope/container/contained.py", line 334, in notifyContainerModified
    notify(ContainerModifiedEvent(object, *descriptions))
  File "/Users/jone/projects/python/cache/eggs/zope.event-3.5.2-py2.7.egg/zope/event/__init__.py", line 31, in notify
    subscriber(event)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py", line 24, in dispatch
    zope.component.subscribers(event, None)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 136, in subscribers
    return sitemanager.subscribers(objects, interface)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py", line 321, in subscribers
    return self.adapters.subscribers(objects, provided)
  File "/Users/jone/projects/python/cache/eggs/zope.interface-3.6.7-py2.7-macosx-10.4-x86_64.egg/zope/interface/adapter.py", line 585, in subscribers
    subscription(*objects)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py", line 32, in objectEventNotify
    zope.component.subscribers((event.object, event), None)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 136, in subscribers
    return sitemanager.subscribers(objects, interface)
  File "/Users/jone/projects/python/cache/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py", line 321, in subscribers
    return self.adapters.subscribers(objects, provided)
  File "/Users/jone/projects/python/cache/eggs/zope.interface-3.6.7-py2.7-macosx-10.4-x86_64.egg/zope/interface/adapter.py", line 585, in subscribers
    subscription(*objects)
  File "/Users/jone/projects/python/cache/eggs/plone.dexterity-2.1.3-py2.7.egg/plone/dexterity/content.py", line 398, in reindexOnModify
    content.reindexObject()
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/cmf_catalog_aware.py", line 77, in reindexObject
    return original_reindexObject(self, idxs)
  File "/Users/jone/projects/python/cache/eggs/Products.CMFCore-2.2.7-py2.7.egg/Products/CMFCore/CMFCatalogAware.py", line 88, in reindexObject
    catalog.reindexObject(self, idxs=idxs)
  File "/Users/jone/projects/python/cache/eggs/Products.CMFCore-2.2.7-py2.7.egg/Products/CMFCore/CatalogTool.py", line 301, in reindexObject
    self.catalog_object(object, uid, idxs, update_metadata)
  File "/Users/jone/projects/python/cache/eggs/Products.CMFPlone-4.3.2-py2.7.egg/Products/CMFPlone/CatalogTool.py", line 353, in catalog_object
    update_metadata, pghandler=pghandler)
  File "/Users/jone/projects/python/cache/eggs/Products.ZCatalog-3.0.2-py2.7.egg/Products/ZCatalog/ZCatalog.py", line 476, in catalog_object
    update_metadata=update_metadata)
  File "/Users/jone/projects/python/cache/eggs/Products.ZCatalog-3.0.2-py2.7.egg/Products/ZCatalog/Catalog.py", line 347, in catalogObject
    self.updateMetadata(object, uid, index)
  File "/Users/jone/projects/python/cache/eggs/Products.ZCatalog-3.0.2-py2.7.egg/Products/ZCatalog/Catalog.py", line 292, in updateMetadata
    newDataRecord = self.recordify(object)
  File "/Users/jone/projects/python/cache/eggs/Products.ZCatalog-3.0.2-py2.7.egg/Products/ZCatalog/Catalog.py", line 415, in recordify
    attr = attr()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/committee.py", line 154, in Title
    model = self.load_model()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/container.py", line 38, in load_model
    oguid = Oguid.for_object(self)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/oguid.py", line 34, in for_object
    return cls(get_current_admin_unit().id(), int_id)
  File "/Users/jone/projects/2packages/opengever.core/opengever/ogds/base/utils.py", line 127, in get_current_admin_unit
    return ogds_service().fetch_admin_unit(proxy.current_unit_id)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/service.py", line 60, in fetch_admin_unit
    return self._query_admin_units(enabled_only=False).get(unit_id)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 818, in get
    return self._get_impl(ident, loading.load_on_ident)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 851, in _get_impl
    return fallback_fn(self, key)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/loading.py", line 217, in load_on_ident
    return q.one()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2472, in one
    ret = list(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/query.py", line 2514, in __iter__
    self.session._autoflush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1292, in _autoflush
    util.raise_from_cause(e)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 1282, in _autoflush
    self.flush()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2004, in flush
    self._flush(objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2122, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/session.py", line 2086, in _flush
    flush_context.execute()
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 373, in execute
    rec.execute(self)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/unitofwork.py", line 561, in execute
    uow
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 249, in delete_obj
    cached_connections, mapper, table, delete)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/persistence.py", line 853, in _emit_delete_statements
    c = connection.execute(statement, del_objects)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 914, in execute
    return meth(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1010, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1146, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1341, in _handle_dbapi_exception
    exc_info
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/compat.py", line 199, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/base.py", line 1139, in _execute_context
    context)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/engine/default.py", line 450, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely) (psycopg2.IntegrityError) update or delete on table "submitteddocuments" violates foreign key constraint "proposalhistory_submitted_document_id_fkey" on table "proposalhistory"
DETAIL:  Key (id)=(2) is still referenced from table "proposalhistory".
 [SQL: 'DELETE FROM submitteddocuments WHERE submitteddocuments.id = %(id)s'] [parameters: {'id': 2}]



Error in test test_shows_statusmessage_when_no_template_is_configured (opengever.meeting.tests.test_toc.TestAlphabeticalTOC)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_toc.py", line 152, in setUp
    decision_number=2,
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x139ed2b90> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_toc_can_be_downloaded (opengever.meeting.tests.test_toc.TestAlphabeticalTOC)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_toc.py", line 152, in setUp
    decision_number=2,
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x13906a510> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_toc_json_can_be_downloaded (opengever.meeting.tests.test_toc.TestAlphabeticalTOC)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_toc.py", line 152, in setUp
    decision_number=2,
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x13d4c4ed0> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_toc_json_is_generated_correctly (opengever.meeting.tests.test_toc.TestAlphabeticalTOC)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_toc.py", line 152, in setUp
    decision_number=2,
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x13d6c4d50> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_shows_statusmessage_when_no_template_is_configured (opengever.meeting.tests.test_toc.TestTOCByRepository)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_toc.py", line 152, in setUp
    decision_number=2,
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x126c3d910> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_toc_can_be_downloaded (opengever.meeting.tests.test_toc.TestTOCByRepository)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_toc.py", line 152, in setUp
    decision_number=2,
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x13006f190> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_toc_json_can_be_downloaded (opengever.meeting.tests.test_toc.TestTOCByRepository)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_toc.py", line 152, in setUp
    decision_number=2,
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x12487d510> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed



Error in test test_toc_json_is_generated_correctly (opengever.meeting.tests.test_toc.TestTOCByRepository)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 333, in run
    self.setUp()
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_toc.py", line 152, in setUp
    decision_number=2,
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/monkey/patches/default_values.py", line 281, in create
    result = original_create(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.builder-1.7.5-py2.7.egg/ftw/builder/builder.py", line 11, in create
    return builder.create(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 29, in create
    obj = self.create_object(**kwargs)
  File "/Users/jone/projects/2packages/opengever.core/src/opengever.ogds.models/opengever/ogds/models/tests/builders.py", line 56, in create_object
    return self.mapped_class(**self.arguments)
  File "<string>", line 4, in __init__
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 306, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/util/langhelpers.py", line 60, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/state.py", line 303, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/model/agendaitem.py", line 71, in __init__
    super(AgendaItem, self).__init__(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/ext/declarative/base.py", line 650, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 224, in __set__
    instance_dict(instance), value, None)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 802, in set
    value = self.fire_replace_event(state, dict_, value, old, initiator)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 824, in fire_replace_event
    self._replace_token or self._init_append_or_replace_token())
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 1164, in emit_backref_from_scalar_set_event
    passive=PASSIVE_NO_FETCH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 603, in append
    self.set(state, dict_, value, initiator, passive=passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 785, in set
    state, dict_, passive=PASSIVE_ONLY_PERSISTENT | NO_AUTOFLUSH)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/attributes.py", line 578, in get
    value = self.callable_(state, passive)
  File "/Users/jone/projects/python/cache/eggs/SQLAlchemy-1.0.5-py2.7-macosx-10.4-x86_64.egg/sqlalchemy/orm/strategies.py", line 501, in _load_for_state
    (orm_util.state_str(state), self.key)
DetachedInstanceError: Parent instance <Proposal at 0x129f61150> is not bound to a Session; lazy load operation of attribute 'agenda_item' cannot proceed

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-7wC_5K.html

Failure in test test_list_unscheduled_proposals_returns_a_json_representation_for_all_unscheduled_proposals (opengever.meeting.tests.test_unscheduled_proposals.TestScheduleProposal)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_unscheduled_proposals.py", line 68, in test_list_unscheduled_proposals_returns_a_json_representation_for_all_unscheduled_proposals
    browser.json.get('items'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [{u'submitted_proposal_url': u... != [{u'submitted_proposal_url': u...

First differing element 0:
{u'submitted_proposal_url': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/submitted-proposal-1', u'schedule_url': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-1/unscheduled_proposals/1/schedule', u'title': u'Fooo'}
{u'submitted_proposal_url': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/submitted-proposal-2', u'schedule_url': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-2/unscheduled_proposals/2/schedule', u'title': u'Fooo'}

Diff is 2100 characters long. Set self.maxDiff to None to see it.



Error in test test_raise_unauthorized_when_meeting_is_not_editable (opengever.meeting.tests.test_unscheduled_proposals.TestScheduleProposal)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_unscheduled_proposals.py", line 117, in test_raise_unauthorized_when_meeting_is_not_editable
    browser.login().open(self.meeting_wrapper, view=view)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 138, in publish
    request, bind=1)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/mapply.py", line 77, in mapply
    if debug is not None: return debug(object,args,context)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 48, in call_object
    result=apply(object,args) # Type s<cr> to step into published object.
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/browser/meetings/unscheduled_proposals.py", line 46, in schedule_proposal
    raise NotFound
NotFound

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-Cj_X7x.html

Failure in test test_list_unscheduled_proposals_returns_a_json_representation_for_all_unscheduled_proposals (opengever.meeting.tests.test_unscheduled_proposals.TestUnscheduledProposals)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/meeting/tests/test_unscheduled_proposals.py", line 68, in test_list_unscheduled_proposals_returns_a_json_representation_for_all_unscheduled_proposals
    browser.json.get('items'))
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 752, in assertListEqual
    self.assertSequenceEqual(list1, list2, msg, seq_type=list)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 734, in assertSequenceEqual
    self.fail(msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 415, in fail
    raise self.failureException(msg)
AssertionError: Lists differ: [{u'submitted_proposal_url': u... != [{u'submitted_proposal_url': u...

First differing element 0:
{u'submitted_proposal_url': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/submitted-proposal-1', u'schedule_url': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-1/unscheduled_proposals/1/schedule', u'title': u'Fooo'}
{u'submitted_proposal_url': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/submitted-proposal-2', u'schedule_url': u'http://nohost/plone/opengever-meeting-committeecontainer/committee-1/meeting-2/unscheduled_proposals/2/schedule', u'title': u'Fooo'}

Diff is 2100 characters long. Set self.maxDiff to None to see it.

  Ran 235 tests with 50 failures, 46 errors and 0 skipped in 10 minutes 59.236 seconds.
Running opengever.core.testing.OfficeatworkLayer tests:
  Tear down opengever.core.testing.MeetingLayer in 0.003 seconds.
  Set up opengever.core.testing.OfficeatworkLayer in 0.030 seconds.
  Ran 7 tests with 50 failures, 0 errors and 0 skipped in 10.880 seconds.
Running opengever.core.testing.PrivateFolderLayer tests:
  Tear down opengever.core.testing.OfficeatworkLayer in 0.003 seconds.
  Set up opengever.core.testing.PrivateFolderLayer in 0.025 seconds.
Error checking for CSRF. Transaction will be aborted since the request is now unsafe:
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/plone.protect-3.0.17-py2.7.egg/plone/protect/auto.py", line 177, in check
    return self._check()
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/protect.py", line 128, in _check
    self._log_csrf_incident(env)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/protect.py", line 154, in _log_csrf_incident
    log_dir = PathFinder().var_log
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/pathfinder.py", line 12, in __init__
    self._assert_proper_configuration()
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/pathfinder.py", line 20, in _assert_proper_configuration
    "Zope is not configured properly yet, refusing "
RuntimeError: Zope is not configured properly yet, refusing operate on paths that might be wrong!

Error checking for CSRF. Transaction will be aborted since the request is now unsafe:
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/plone.protect-3.0.17-py2.7.egg/plone/protect/auto.py", line 177, in check
    return self._check()
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/protect.py", line 128, in _check
    self._log_csrf_incident(env)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/protect.py", line 154, in _log_csrf_incident
    log_dir = PathFinder().var_log
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/pathfinder.py", line 12, in __init__
    self._assert_proper_configuration()
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/pathfinder.py", line 20, in _assert_proper_configuration
    "Zope is not configured properly yet, refusing "
RuntimeError: Zope is not configured properly yet, refusing operate on paths that might be wrong!

Error checking for CSRF. Transaction will be aborted since the request is now unsafe:
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/plone.protect-3.0.17-py2.7.egg/plone/protect/auto.py", line 177, in check
    return self._check()
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/protect.py", line 128, in _check
    self._log_csrf_incident(env)
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/protect.py", line 154, in _log_csrf_incident
    log_dir = PathFinder().var_log
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/pathfinder.py", line 12, in __init__
    self._assert_proper_configuration()
  File "/Users/jone/projects/2packages/opengever.core/opengever/base/pathfinder.py", line 20, in _assert_proper_configuration
    "Zope is not configured properly yet, refusing "
RuntimeError: Zope is not configured properly yet, refusing operate on paths that might be wrong!

error parsing dom, failure to add csrf token to response for url http://nohost/plone/opengever-private.root/test_user_1_/dossier-1/++add++opengever.document.document
error parsing dom, failure to add csrf token to response for url http://nohost/plone/opengever-private.root/test_user_1_/dossier-1/++add++opengever.document.document
  Ran 29 tests with 50 failures, 0 errors and 0 skipped in 53.231 seconds.
Running opengever.core.testing.opengever.core:functional:zserver tests:
  Tear down opengever.core.testing.PrivateFolderLayer in 0.002 seconds.
  Tear down opengever.core.testing.opengever.core:postgres:functional in 0.000 seconds.
  Tear down ftw.builder.testing.set_builder_session_factory in 0.000 seconds.
  Set up plone.testing.z2.ZServer in 0.507 seconds.
  Set up ftw.builder.testing.set_builder_session_factory in 0.000 seconds.
  Set up opengever.core.testing.opengever.core:functional:zserver in 0.000 seconds.


Failure in test test_document_creation (opengever.api.tests.test_content_creation.TestContentCreation)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/api/tests/test_content_creation.py", line 74, in test_document_creation
    self.assertEqual(201, response.status_code)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 201 != 500

The following test left new threads behind:
test_document_creation (opengever.api.tests.test_content_creation.TestContentCreation)
New thread(s): [<_DummyThread(Dummy-1, started daemon 123145311866880)>]


Failure in test test_dossier_creation (opengever.api.tests.test_content_creation.TestContentCreation)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/2packages/opengever.core/opengever/api/tests/test_content_creation.py", line 55, in test_dossier_creation
    self.assertEqual(201, response.status_code)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 201 != 500



Error in test test_unlocking_document_is_visible_for_other_users (opengever.officeatwork.tests.test_webdav_unlock.TestWebDAVUnlock)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/officeatwork/tests/test_webdav_unlock.py", line 43, in test_unlocking_document_is_visible_for_other_users
    browser.login(user.getId()).visit(self.document)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 217, in visit
    return self.open(*args, **kwargs)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 177, in open
    self._open_with_mechanize(url, data=data, referer=referer)
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/core.py", line 278, in _open_with_mechanize
    self.response = self.get_mechbrowser().open(request)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "/Users/jone/projects/python/cache/eggs/mechanize-0.2.5-py2.7.egg/mechanize/_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 64, in http_open
    return self.do_open(connectionFactory, req)
  File "/Users/jone/projects/python/buildout.python/parts/opt/lib/python2.7/urllib2.py", line 1194, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "/Users/jone/projects/python/cache/eggs/zope.testbrowser-3.11.1-py2.7.egg/zope/testbrowser/testing.py", line 76, in request
    self.response = self.caller(request_string, handle_errors)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 122, in wrapped_func
    return func(*args, **kw)
  File "/Users/jone/projects/python/cache/eggs/plone.testing-4.0.8-py2.7.egg/plone/testing/_z2_testbrowser.py", line 218, in __call__
    debug=not handle_errors,
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Test.py", line 202, in publish_module
    response = publish(request, module_name, after_list, debug=debug)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/Publish.py", line 127, in publish
    object=request.traverse(path, validated_hook=validated_hook)
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/BaseRequest.py", line 617, in traverse
    response.unauthorized()
  File "/Users/jone/projects/python/cache/eggs/Zope2-2.13.21-py2.7.egg/ZPublisher/HTTPResponse.py", line 756, in unauthorized
    raise Unauthorized, m
Unauthorized: You are not authorized to access this resource.


ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-1GRmN_.html

Failure in test test_unlocking_documents_exits_shadow_state (opengever.officeatwork.tests.test_webdav_unlock.TestWebDAVUnlock)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/officeatwork/tests/test_webdav_unlock.py", line 30, in test_unlocking_documents_exits_shadow_state
    self.assertFalse(browser.context.is_shadow_document())
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 421, in assertFalse
    raise self.failureException(msg)
AssertionError: True is not False

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-qV8ECN.html

Failure in test test_document_checkin_with_comment (opengever.officeconnector.tests.test_api.TestOfficeconnectorAPI)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/officeconnector/tests/test_api.py", line 418, in test_document_checkin_with_comment
    self.assertEquals(journal_entry[1], 'Dokument eingecheckt')
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: u'Dokument hinzugef\xfcgt: docu-2' != 'Dokument eingecheckt'



Failure in test test_document_checkin_without_comment (opengever.officeconnector.tests.test_api.TestOfficeconnectorAPI)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/officeconnector/tests/test_api.py", line 375, in test_document_checkin_without_comment
    self.assertEquals(response.content, self.modified_file_content)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 521, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 514, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: 'original file content' != u'modified file content'

 
ftw.testbrowser dump: /var/folders/sl/zm2jlwhx5vg91v5th340r5dw0000gn/T/ftw.testbrowser-WhYPs3.html

Failure in test test_document_checkout (opengever.officeconnector.tests.test_api.TestOfficeconnectorAPI)
Traceback (most recent call last):
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 340, in run
    testMethod()
  File "/Users/jone/projects/python/cache/eggs/ftw.testbrowser-1.19.4.dev0-py2.7.egg/ftw/testbrowser/__init__.py", line 32, in test_function
    return func(self, *args, **kwargs)
  File "/Users/jone/projects/2packages/opengever.core/opengever/officeconnector/tests/test_api.py", line 347, in test_document_checkout
    self.assertTrue(browser.open(self.doc_with_file_wf_open).css('.checked_out_viewlet')) # noqa
  File "/Users/jone/projects/python/cache/eggs/unittest2-0.5.1-py2.7.egg/unittest2/case.py", line 427, in assertTrue
    raise self.failureException(msg)
AssertionError: <Nodes: []> is not True

  Ran 24 tests with 56 failures, 1 errors and 0 skipped in 1 minutes 26.571 seconds.
Running opengever.core.testing.opengever.core:integration tests:
  Tear down opengever.core.testing.opengever.core:functional:zserver in 0.000 seconds.
  Tear down plone.testing.z2.ZServer in 5.505 seconds.
  Tear down ftw.builder.testing.set_builder_session_factory in 0.000 seconds.
  Set up ftw.builder.testing.set_builder_session_factory in 0.000 seconds.
  Set up opengever.core.testing.opengever.core:integration in 0.000 seconds.
  Ran 1 tests with 56 failures, 0 errors and 1 skipped in 0.874 seconds.
Running opengever.core.testing.opengever.core:sqlite:functional tests:
  Tear down opengever.core.testing.opengever.core:integration in 0.000 seconds.
  Tear down opengever.core.testing.OpengeverFixture:PostgreSQLFixture in 0.004 seconds.
  Tear down opengever.core.postgresql_testing.PostgreSQLFixture in 0.000 seconds.
  Tear down ftw.builder.testing.set_builder_session_factory in 0.000 seconds.
  Set up opengever.core.sqlite_testing.SQLiteMemoryFixture in 0.000 seconds.
  Set up opengever.core.testing.OpengeverFixture:SQLiteMemoryFixture in 10.439 seconds.
  Set up ftw.builder.testing.set_builder_session_factory in 0.000 seconds.
  Set up opengever.core.testing.opengever.core:sqlite:functional in 0.000 seconds.

