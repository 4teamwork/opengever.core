version: "3"

services:
  msgconvert:
    image: 4teamwork/msgconvert:latest
    ports:
      - 8090:8080
  sablon:
    image: 4teamwork/sablon:latest
    ports:
      - 8091:8080
  pdflatex:
    image: 4teamwork/pdflatex:latest
    ports:
      - 8092:8080
  weasyprint:
    image: 4teamwork/weasyprint:latest
    ports:
      - 8093:8080
  clamav:
    image: mkodockx/docker-clamav:alpine
    ports:
      - 3310:3310
    profiles:
      - clamav
  solr:
    image: 4teamwork/ogsolr:latest
    build:
      context: .
      dockerfile: ./docker/solr/Dockerfile
    command:
      - solr-precreate
      - ogsite
      - /opt/solr/server/solr/configsets/ogsite
    volumes:
      - ./var/solr:/var/solr/data
    ports:
      - 18983:8983
    profiles:
      - all
      - solr
